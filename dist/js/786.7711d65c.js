"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[786],{4677:function(e,t,a){var l=a(6265),s=a.n(l),o=a(1120),r=a(4301),n=a(6294);const c=(0,n.Z)();t["Z"]=(0,r.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";c.isLoading=!0,s().get(e).then((e=>{this.cartNum=e.data.data.carts.length,this.cart=e.data.data,c.isLoading=!1})).catch((e=>console.error(e)))},updateCart(e){const t=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${e.id}`;c.isLoading=!0,c.cartLoadingItem=e.id;const a={product_id:e.product_id,qty:e.qty};s().put(t,{data:a}).then((e=>{c.cartLoadingItem="",this.getCart()})).catch((e=>console.error(e)))},removeCartItem(e){c.cartLoadingItem=e;const t=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${e}`;c.isLoading=!0,s()["delete"](t).then((e=>{console.log(e),c.PushManager(e,"移除購物車品項"),c.cartLoadingItem="",this.getCart(),c.isLoading=!1})).catch((e=>console.error(e)))},addCart(e,t=1){const a="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";c.cartLoadingItem=e;const l={product_id:e,qty:t};s().post(a,{data:l}).then((e=>{c.cartLoadingItem="",this.getCart(),c.PushManager(e,"加入購物車")})).catch((e=>console.error(e)))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",t=this.form;s().post(e,{data:t}).then((e=>{o.Z.push(`/checkoutPay/${e.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((e=>console.error(e)))}}})},8778:function(e,t,a){var l=a(1120),s=a(4301),o=a(4677);const r=(0,o.Z)();t["Z"]=(0,s.Q_)("goStore",{actions:{goCart(){l.Z.push("/cart"),r.cartBoxState=!1},goProducts(){l.Z.push("/products"),r.cartBoxState=!1},goProduct(e){l.Z.push(`/product/${e}`)},goCheckout(){l.Z.push("/checkout")}}})},6294:function(e,t,a){var l=a(4301);t["Z"]=(0,l.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{PushManager(e,t="更新"){if("抽獎"==e||e.data.success){const e={style:"success",title:`${t}成功`};this.messages.push(e)}else{const a="string"===typeof e.data.message?[e.data.message]:e.data.message,l={style:"danger",title:`${t}失敗`,content:a.join("、")};this.messages.push(l)}}}})},2584:function(e,t,a){a.d(t,{Z:function(){return j}});var l=a(3396),s=a(7139);const o=e=>((0,l.dD)("data-v-a3716e04"),e=e(),(0,l.Cn)(),e),r={class:"container py-4 checkout-bar w-75"},n={class:"row fs-5 fs-md-3 fw-bold"},c={key:0,style:{color:"#f4696b"},class:"la-ball-climbing-dot la-dark"},i=o((()=>(0,l._)("div",null,null,-1))),d=o((()=>(0,l._)("div",null,null,-1))),u=o((()=>(0,l._)("div",null,null,-1))),m=o((()=>(0,l._)("div",null,null,-1))),f=[i,d,u,m],h=(0,l.Uk)(" 購物車 "),p={key:1,style:{color:"#f4696b"},class:"la-ball-climbing-dot la-dark"},b=o((()=>(0,l._)("div",null,null,-1))),g=o((()=>(0,l._)("div",null,null,-1))),_=o((()=>(0,l._)("div",null,null,-1))),v=o((()=>(0,l._)("div",null,null,-1))),y=[b,g,_,v],k=(0,l.Uk)(" 填寫"),w=o((()=>(0,l._)("br",{class:"d-block d-sm-none"},null,-1))),x=(0,l.Uk)("訂單 "),C={key:2,style:{color:"#f4696b"},class:"la-ball-climbing-dot la-dark"},Z=o((()=>(0,l._)("div",null,null,-1))),$=o((()=>(0,l._)("div",null,null,-1))),U=o((()=>(0,l._)("div",null,null,-1))),L=o((()=>(0,l._)("div",null,null,-1))),V=[Z,$,U,L],W=(0,l.Uk)(" 確認"),q=o((()=>(0,l._)("br",{class:"d-block d-sm-none"},null,-1))),P=(0,l.Uk)("付款 ");function I(e,t){const a=(0,l.up)("font-awesome-icon");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",n,["cart"===this.$route.name?((0,l.wg)(),(0,l.iD)("div",c,f)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,s.C_)(["col d-flex flex-column px-2 py-3 align-items-center rounded-pill",{"bg-primary":"cart"===this.$route.name}])},[(0,l.Wm)(a,{icon:"fa-solid fa-1"}),h],2),"checkout"===this.$route.name?((0,l.wg)(),(0,l.iD)("div",p,y)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,s.C_)(["col d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkout"===this.$route.name}])},[(0,l.Wm)(a,{icon:"fa-solid fa-2"}),k,w,x],2),"checkoutPay"===this.$route.name?((0,l.wg)(),(0,l.iD)("div",C,V)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,s.C_)(["col d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkoutPay"===this.$route.name}])},[(0,l.Wm)(a,{icon:"fa-solid fa-3"}),W,q,P],2)])])}var S=a(89);const B={},D=(0,S.Z)(B,[["render",I],["__scopeId","data-v-a3716e04"]]);var j=D},5786:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var l=a(3396),s=a(7139),o=a(9242);const r={class:"container"},n={class:"my-3 row justify-content-center flex-sm-row-reverse"},c={class:"col-md-6"},i=(0,l._)("div",{class:"d-flex justify-content-center"},[(0,l._)("h1",{class:"fs-2 text-center fw-bold"},"購物清單")],-1),d={class:"table-responsive-md mt-4"},u={class:"table lh-lg"},m=(0,l._)("thead",{class:"table-primary"},[(0,l._)("tr",{class:"table-nowrap"},[(0,l._)("th",{class:"text-start"},"商品名稱"),(0,l._)("th",null,"數量"),(0,l._)("th",{class:"text-end"},"價格")])],-1),f={class:"text-center"},h={class:"text-end"},p={class:"text-strong"},b={class:"text-center table-primary"},g={colspan:"3",class:"text-end fs-4"},_=(0,l._)("div",{class:"d-flex justify-content-center"},[(0,l._)("h1",{class:"fs-2 fw-bold"},"收件人資訊")],-1),v={class:"mb-3"},y=(0,l._)("label",{for:"email",class:"form-label fw-bold fs-5"},"Email：",-1),k={class:"mb-3"},w=(0,l._)("label",{for:"name",class:"form-label fw-bold fs-5"},"收件人姓名：",-1),x={class:"mb-3"},C=(0,l._)("label",{for:"tel",class:"form-label fw-bold fs-5"},"收件人電話：",-1),Z={class:"mb-3"},$=(0,l._)("label",{for:"address",class:"form-label fw-bold fs-5"},"收件人地址：",-1),U={class:"mb-3"},L=(0,l._)("label",{for:"message",class:"form-label fw-bold fs-5"},"留言：",-1),V={class:"d-flex justify-content-between mt-3"},W=(0,l._)("i",{class:"bi bi-caret-left-fill"},null,-1),q=(0,l.Uk)("回購物車 "),P=[W,q],I=(0,l._)("button",{type:"submit",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg"},[(0,l.Uk)(" 付款去"),(0,l._)("i",{class:"bi bi-caret-right-fill"})],-1);function S(e,t,a,W,q,S){const B=(0,l.up)("UserCheckoutBar"),D=(0,l.up)("v-field"),j=(0,l.up)("ErrorMessage"),M=(0,l.up)("v-form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(B),(0,l._)("div",r,[(0,l._)("div",n,[(0,l._)("div",c,[i,(0,l._)("div",d,[(0,l._)("table",u,[m,(0,l._)("tbody",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{class:"table-nowrap text-start",key:t.id},[(0,l._)("td",null,(0,s.zw)(t.product.title),1),(0,l._)("td",null,(0,s.zw)(t.qty),1),(0,l._)("td",h,[(0,l._)("div",p," NT$ "+(0,s.zw)(e.$filters.currency(t.final_total))+" 元 ",1)])])))),128))]),(0,l._)("tfoot",b,[(0,l._)("tr",null,[(0,l._)("td",g," 總計 :NT$ "+(0,s.zw)(e.$filters.currency(e.cart.final_total))+" 元 ",1)])])])])]),(0,l.Wm)(M,{class:"col-md-6",onSubmit:e.gotoPay},{default:(0,l.w5)((({errors:a})=>[_,(0,l._)("div",v,[y,(0,l.Wm)(D,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:e.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.user.email=t)},null,8,["class","modelValue"]),(0,l.Wm)(j,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",k,[w,(0,l.Wm)(D,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:e.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.user.name=t)},null,8,["class","modelValue"]),(0,l.Wm)(j,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",x,[C,(0,l.Wm)(D,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:e.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.user.tel=t)},null,8,["class","modelValue"]),(0,l.Wm)(j,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",Z,[$,(0,l.Wm)(D,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:e.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.user.address=t)},null,8,["class","modelValue"]),(0,l.Wm)(j,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",U,[L,(0,l.wy)((0,l._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.message=t)},null,512),[[o.nr,e.form.message]])]),(0,l._)("div",V,[(0,l._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg",onClick:t[5]||(t[5]=(0,o.iM)(((...t)=>e.goCart&&e.goCart(...t)),["prevent"]))},P),I])])),_:1},8,["onSubmit"])])])],64)}var B=a(2584),D=a(4301),j=a(4677),M=a(8778),N={components:{UserCheckoutBar:B.Z},computed:{...(0,D.rn)(j.Z,["cart","cartNum","gotoPay"]),...(0,D.Ah)(j.Z,["form"])},methods:{...(0,D.nv)(j.Z,["getCart"]),...(0,D.nv)(M.Z,["goCart"]),...(0,D.nv)(j.Z,["getCart"])}},z=a(89);const E=(0,z.Z)(N,[["render",S]]);var Q=E}}]);
//# sourceMappingURL=786.7711d65c.js.map