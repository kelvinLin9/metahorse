{"version":3,"file":"js/153.9af6012f.js","mappings":"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","sources":["webpack://hw1/./src/stores/cartStore.js","webpack://hw1/./src/stores/favoriteStore.js","webpack://hw1/./src/stores/goStore.js","webpack://hw1/./src/stores/productStore.js","webpack://hw1/./src/stores/statusStore.js","webpack://hw1/./src/views/UserProducts.vue","webpack://hw1/./src/views/UserProducts.vue?d35d"],"sourcesContent":["import axios from 'axios'\r\nimport { defineStore } from 'pinia'// 起手式\r\nimport statusStore from './statusStore'\r\n\r\n// 所有資料帶出來存到status\r\n// 把原本this改成status\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    cart: {},\r\n    cartNum: 0,\r\n    cartBoxState: false\r\n    // qty: 1 // 不需要 傳到後端就好\r\n  }),\r\n  actions: {\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      status.isLoading = true\r\n      axios.get(url)\r\n        .then((res) => {\r\n          console.log(\"GETC!!!!!!!!!!!!!!!!\")\r\n          this.cartNum = res.data.data.carts.length\r\n          console.log('this.cartNum', this.cartNum)\r\n          this.cart = res.data.data\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    // 更改購物車商品數量\r\n    updateCart (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      status.isLoading = true\r\n      status.cartLoadingItem = item.id\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty\r\n      }\r\n      axios.put(url, { data: cart })\r\n        .then((res) => {\r\n          status.cartLoadingItem = ''\r\n          this.getCart()\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    removeCartItem (id) {\r\n      status.cartLoadingItem = id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      status.isLoading = true\r\n      axios.delete(url)\r\n        .then((res) => {\r\n          console.log(res)\r\n          status.PushManager(res, '移除購物車品項')\r\n          status.cartLoadingItem = ''\r\n          this.getCart()\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    addCart (id, qty = 1) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      status.cartLoadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      axios.post(url, { data: cart })\r\n        .then((res) => {\r\n          status.cartLoadingItem = ''\r\n          this.getCart() // 重新取得購物車資料\r\n          status.PushManager(res, '加入購物車')\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    cartBoxToggle () {\r\n      // 傳到ToastMessages 讓提示能移開避免擋到\r\n      this.cartBoxState = !this.cartBoxState\r\n      \r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'// 起手式\r\n\r\nexport default defineStore('favoriteStore', {\r\n  state: () => ({\r\n    favorite: [],\r\n    favoriteIds: [],\r\n    favoriteNum: 0,\r\n    products: []\r\n  }),\r\n  actions: {\r\n    productsBus(products){\r\n      this.products = products\r\n      this.getFavorite ()\r\n    },\r\n    getFavoriteIds () {\r\n      this.favoriteIds = JSON.parse(localStorage.getItem('favoriteIds')) || []\r\n    },\r\n    getFavorite () {\r\n      this.getFavoriteIds()\r\n      this.favorite = []\r\n      this.products.forEach((item) => {\r\n        if (this.favoriteIds.indexOf(item.id) > -1) {\r\n          this.favorite.push(item)\r\n        }\r\n      })\r\n      this.favoriteNum = this.favorite.length\r\n    },\r\n    toggleFavorite (item) {\r\n      const clickId = item\r\n      const hasFavorite = this.favoriteIds.some((item) => item === clickId) // v-on 所以只判斷點擊的那一次\r\n      if (!hasFavorite) {\r\n        this.favoriteIds.push(item)\r\n        localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      } else {\r\n        const delItem = this.favoriteIds.find((item) => {\r\n          return item === clickId\r\n        })\r\n        this.favoriteIds.splice(this.favoriteIds.indexOf(delItem), 1)\r\n        localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      }\r\n      this.getFavorite()\r\n    },\r\n    removeFavorite (item) {\r\n      this.favoriteIds.splice(this.favoriteIds.indexOf(item), 1)\r\n      localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      this.getFavorite()\r\n    }\r\n  },\r\n  getters: {\r\n    favState () {\r\n      return (id) => {\r\n        return this.favoriteIds.indexOf(id) > -1 ? 'bi bi-heart-fill' : 'bi bi-heart'\r\n      }\r\n    }\r\n  }\r\n})\r\n","import router from '../router'\r\nimport { defineStore } from 'pinia'// 起手式\r\nimport cartStore from './cartStore'\r\n\r\nconst cart = cartStore()\r\n// 所有資料帶出來存到cart\r\n// 把原本this改成cart\r\n\r\nexport default defineStore('goStore', {\r\n  actions: {\r\n    goCart () {\r\n      router.push('/cart')\r\n      cart.cartBoxState = false\r\n    },\r\n    goProducts () {\r\n      router.push('/products')\r\n      cart.cartBoxState = false\r\n    },\r\n    goProduct (id) {\r\n      router.push(`/product/${id}`)\r\n    },\r\n    goCheckout () {\r\n      router.push('/checkout')\r\n    }\r\n  }\r\n})\r\n","import axios from 'axios'\r\n// 起手式\r\nimport { defineStore } from 'pinia'\r\nimport statusStore from './statusStore'\r\nimport favoriteStore from './favoriteStore'\r\n\r\n// 所有資料帶出來存到status\r\n// 把原本this改成status\r\nconst status = statusStore()\r\nconst favorite = favoriteStore()\r\n\r\nexport default defineStore('productStore', {\r\n  state: () => ({\r\n    products: [],\r\n    product: {},\r\n    productsHot: [],\r\n    productsGame: [],\r\n    temp: {}, // 暫存點擊到的賽馬資訊\r\n    category: 'all'\r\n  }),\r\n  actions: {\r\n    getProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      status.isLoading = true\r\n      axios.get(url)\r\n        .then((res) => {\r\n          console.log(\"GETP!!!!!!!!!!!!!!!!\")\r\n          this.products = res.data.products\r\n          this.productsHot = this.products.filter((item, index) => index > 14) // 先取幾個來試用\r\n          favorite.productsBus(this.products)\r\n          // 手動挑出想展示的商品(首頁用)\r\n          this.productsGame = []\r\n          this.productsGame.push(res.data.products[11])\r\n          this.productsGame.push(res.data.products[10])\r\n          this.productsGame.push(res.data.products[8])\r\n          this.productsGame.push(res.data.products[5])\r\n          this.temp = this.productsGame[0]\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    getProduct (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`\r\n      status.isLoading = true\r\n      axios.get(api).then((res) => {\r\n        status.isLoading = false\r\n        if (res.data.success) {\r\n          this.product = res.data.product\r\n          // 自己補上後端沒有的預設值\r\n          this.product.qty = 1\r\n        }\r\n      })\r\n    },\r\n    // 無法雙向綁定的另種解法\r\n    // 創一個新的函數傳遞category\r\n    setCategory (i) {\r\n      this.category = i\r\n    }\r\n  },\r\n  getters: {\r\n    filterProducts () {\r\n      let filterProducts\r\n      switch (this.category) {\r\n        case 'all':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item\r\n          })\r\n          break\r\n        case 'S':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'S'\r\n          })\r\n          break\r\n        case 'A':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'A'\r\n          })\r\n          break\r\n        case 'B':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'B'\r\n          })\r\n          break\r\n        case 'C':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'C'\r\n          })\r\n          break\r\n        case '馬鞍':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.description === '馬鞍'\r\n          })\r\n          break\r\n        case '馬蹄鐵':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.description === '馬蹄鐵'\r\n          })\r\n          break\r\n        case '馬飼料':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.description === '馬飼料'\r\n          })\r\n          break\r\n      }\r\n      return filterProducts\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: [],\r\n    cartLoadingItem: '',\r\n    messages: []\r\n  }),\r\n  actions: {\r\n    // 傳到ToastMessages.vue\r\n    PushManager (res, title = '更新') {\r\n      if (res.data.success) {\r\n        const obj = {\r\n          style: 'success',\r\n          title: `${title}成功`\r\n        }\r\n        this.messages.push(obj)\r\n      } else {\r\n        // 有些訊息是字串，有些則是陣列，在此統一格式\r\n        const message = typeof res.data.message === 'string'\r\n          ? [res.data.message]\r\n          : res.data.message\r\n        const obj = {\r\n          style: 'danger',\r\n          title: `${title}失敗`,\r\n          content: message.join('、')\r\n        }\r\n        this.messages.push(obj)\r\n      }\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n      <!-- 外層放背景，內層放黑底 -->\r\n  <div class=\"productsBanner mb-5\">\r\n    <div class=\"bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center\">\r\n      <h1 class=\"w-100 d-flex align-items-center justify-content-center\">\r\n        <span class=\"me-2 fs-1 fw-bolder text-white\">所有商品</span>\r\n        <span class=\"fs-3 text-primary align-self-end\">/ All Products</span>\r\n      </h1>\r\n    </div>\r\n  </div>\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-3\">\r\n        <h2 class=\"fw-bold text-center f-kalam bg-primary\">賽馬( Level )</h2>\r\n        <div class=\"fw-bold list-group flex-row flex-lg-column \">\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == 'all' ,'fs-4' : category == 'all'}\"\r\n              @click.prevent=\"setCategory('all')\">- All</a>\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == 'S' ,'fs-4' : category == 'S'}\"\r\n              @click.prevent=\"setCategory('S')\">- S</a>\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == 'A' ,'fs-4' : category == 'A'}\"\r\n              @click.prevent=\"setCategory('A')\">- A</a>\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == 'B' ,'fs-4' : category == 'B'}\"\r\n              @click.prevent=\"setCategory('B')\">- B</a>\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == 'C' ,'fs-4' : category == 'C'}\"\r\n              @click.prevent=\"setCategory('C')\">- C</a>\r\n        </div>\r\n        <hr>\r\n        <h2 class=\"fw-bold text-center f-kalam bg-primary\">道具</h2>\r\n          <div class=\"fw-bold list-group flex-row flex-lg-column \">\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == '馬鞍' ,'fs-4' : category == '馬鞍'}\"\r\n              @click.prevent=\"setCategory('馬鞍')\">- 馬鞍</a>\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == '馬蹄鐵' ,'fs-4' : category == '馬蹄鐵'}\"\r\n              @click.prevent=\"setCategory('馬蹄鐵')\">- 馬蹄鐵</a>\r\n            <a href=\"#\" class=\"list-group-item list-group-item-action border-0 f-kalam fs-5\"\r\n              :class=\"{ 'text-primary' : category == '馬飼料' ,'fs-4' : category == '馬飼料'}\"\r\n              @click.prevent=\"setCategory('馬飼料')\">- 馬飼料</a>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-lg-9\">\r\n        <div class=\"row g-4\">\r\n          <div class=\"col-lg-4 col-md-6 col-12\"\r\n              v-for=\"item in filterProducts\" :key=\"item.id\">\r\n            <div class=\"card rounded-3\">\r\n              <div class=\"card-img overflow-hidden position-relative scale\">\r\n                <button class=\"btn bg-dark fs-4 position-absolute text-white w-100 h-100 bg-opacity-75\" type=\"button\"\r\n                        @click.prevent=\"goProduct(item.id)\">\r\n                  詳細資訊\r\n                </button>\r\n                  <!-- <a href=\"#\"> -->\r\n                <img class=\"rounded-3 img-fit\"\r\n                      :src=\"item.imageUrl\" alt=\"商品照片\">\r\n                  <!-- </a> -->\r\n                <span class=\"position-absolute rounded-circle fs-2 p-1 fav-icon bg-white text-center\"\r\n                      @click.stop=\"toggleFavorite(item.id)\">\r\n                  <i :class=\"favState(item.id)\"\r\n                      data-bs-toggle=\"tooltip\"\r\n                      data-bs-placement=\"top\"\r\n                      title=\"加入 / 移除我的最愛\">\r\n                  </i>\r\n                </span>\r\n              </div>\r\n              <div class=\"card-body d-flex flex-column justify-content-center text-center fw-bold\">\r\n                <span class=\"fs-4\">\r\n                    {{ item.title }}\r\n                  <span class=\"fs-6 text-muted\">（{{ item.category }}）</span>\r\n                </span>\r\n                <span class=\"fs-5\">\r\n                  NT ${{ item.price }}\r\n                  <span class=\"text-muted text-decoration-line-through fs-6 ms-1\">${{ item.origin_price }}</span>\r\n                </span>\r\n                <button type=\"button\"\r\n                        class=\"btn btn-outline-primary text-dark fw-bold fs-5 mt-3\"\r\n                        :disabled=\"cartLoadingItem === item.id\"\r\n                        @click=\"addCart(item.id)\">\r\n                  <div v-if=\"cartLoadingItem === item.id\"\r\n                      class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                  </div>\r\n                    加到購物車\r\n                </button>\r\n              </div>\r\n                <!-- 按下特定id按鈕之後先disabled，運行完之後再開放，避免重複點擊 -->\r\n              <div class=\"d-flex justify-content-center pb-2 fw-bold\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'pinia'\r\nimport productStore from '@/stores/productStore'\r\nimport cartStore from '@/stores/cartStore'\r\nimport statusStore from '@/stores/statusStore'\r\nimport favoriteStore from '@/stores/favoriteStore'\r\nimport goStore from '@/stores/goStore'\r\nexport default {\r\n  methods: {\r\n    ...mapActions(favoriteStore, ['getFavorite', 'getFavoriteIds', 'toggleFavorite']),\r\n    ...mapActions(productStore, ['getProducts', 'setCategory']),\r\n    ...mapActions(cartStore, ['getCart', 'addCart']),\r\n    ...mapActions(goStore, ['goProduct'])\r\n  },\r\n  computed: {\r\n    ...mapState(favoriteStore, ['favorite', 'favoriteIds', 'favState']),\r\n    ...mapState(productStore, ['products', 'filterProducts', 'category']),\r\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem'])\r\n  },\r\n  created () {\r\n    // this.getProducts()\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.f-kalam {\r\n  font-family: 'Kalam', cursive;\r\n}\r\n.productsBanner {\r\n  height: 300px;\r\n  background-image: url(https://i.imgur.com/4vGqi7D.jpg);\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position:center ;\r\n  .bg-dark{\r\n  z-index: 1;\r\n  opacity: 1;\r\n  }\r\n}\r\n.fav-icon {\r\n  width: 50px;\r\n  height: 50px;\r\n  color: rgb(201, 54, 54);\r\n  top: 5px;\r\n  right: 5px;\r\n  z-index: 2;\r\n}\r\n.img-fit{\r\n  width: 100%;\r\n  object-fit: cover;\r\n  transition: 0.5s;\r\n}\r\n// 圖片放大，配合overflow-hidden\r\n.scale{\r\n  &:hover{\r\n    .btn{\r\n      opacity: 1;\r\n    }\r\n    img{\r\n      transform: scale(1.15);\r\n    }\r\n  }\r\n}\r\n.bg-dark{\r\n  z-index: 1; // 往上拉才點的到，不然會點到a標籤\r\n  opacity: 0;\r\n  transition: 0.5s;\r\n}\r\n</style>\r\n","import { render } from \"./UserProducts.vue?vue&type=template&id=39471acb&scoped=true\"\nimport script from \"./UserProducts.vue?vue&type=script&lang=js\"\nexport * from \"./UserProducts.vue?vue&type=script&lang=js\"\n\nimport \"./UserProducts.vue?vue&type=style&index=0&id=39471acb&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\HW1\\\\metahorse\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39471acb\"]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","cart","cartNum","cartBoxState","actions","getCart","url","isLoading","axios","then","res","console","log","this","data","carts","length","catch","err","error","updateCart","item","id","cartLoadingItem","product_id","qty","removeCartItem","PushManager","addCart","cartBoxToggle","favorite","favoriteIds","favoriteNum","products","productsBus","getFavorite","getFavoriteIds","JSON","parse","localStorage","getItem","forEach","indexOf","push","toggleFavorite","clickId","hasFavorite","some","delItem","find","splice","setItem","stringify","removeFavorite","getters","favState","cartStore","goCart","router","goProducts","goProduct","goCheckout","favoriteStore","product","productsHot","productsGame","temp","category","getProducts","filter","index","getProduct","api","success","setCategory","i","filterProducts","description","messages","title","obj","style","message","content","join","class","_createElementVNode","role","_hoisted_24","_createVNode","_component_Loading","active","_ctx","_hoisted_1","_hoisted_5","href","onClick","_hoisted_7","_hoisted_8","_createElementBlock","_Fragment","_renderList","key","type","_hoisted_14","src","imageUrl","alt","_toDisplayString","price","origin_price","disabled","_hoisted_25","_hoisted_27","methods","mapActions","productStore","goStore","computed","mapState","created","__exports__","render"],"sourceRoot":""}