{"version":3,"file":"js/878.6c1ddb12.js","mappings":"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","sources":["webpack://hw1/./src/components/UserFooter.vue","webpack://hw1/./src/components/UserFooter.vue?18c9","webpack://hw1/./src/views/UserFavorite.vue","webpack://hw1/./src/views/UserFavorite.vue?f10e"],"sourcesContent":["<template>\r\n  <div class=\"footer bg-dark mt-3 py-4 mt-md-5\">\r\n    <div class=\"container-fluid\">\r\n      <ul class=\"list-inline text-center\">\r\n        <li class=\"list-inline-item text-light\">\r\n          © Copyright 2022 MetaHorse\r\n        </li>\r\n      </ul>\r\n      <ul class=\"list-inline text-center\">\r\n        <li class=\"list-inline-item\">\r\n          <a class=\"text-light\" href=\"#\" @click.prevent=\"\">\r\n            <i class=\"bi bi-facebook\"></i>\r\n          </a>\r\n        </li>\r\n        <li class=\"list-inline-item ms-2\">\r\n          <a class=\"text-light\" href=\"#\" @click.prevent=\"\">\r\n            <i class=\"bi bi-messenger\"></i>\r\n          </a>\r\n        </li>\r\n        <li class=\"list-inline-item ms-2\">\r\n          <a class=\"text-light\" href=\"#\" @click.prevent=\"\">\r\n            <i class=\"bi bi-instagram\"></i>\r\n          </a>\r\n        </li>\r\n        <li class=\"list-inline-item ms-2\">\r\n          <a\r\n            class=\"text-light\"\r\n            href=\"\"\r\n            target=\"_blank\"\r\n          >\r\n            <i class=\"bi bi-github\"></i>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n      <ul class=\"list-inline text-center\">\r\n        <li class=\"list-inline-item text-light\">\r\n          個人練習作品，非商業用途\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n// .footer {\r\n  // position: fixed;\r\n  // width: 100%;\r\n  // top: 100;\r\n// }\r\n</style>\r\n","import { render } from \"./UserFooter.vue?vue&type=template&id=11da1bf7&scoped=true\"\nconst script = {}\n\nimport \"./UserFooter.vue?vue&type=style&index=0&id=11da1bf7&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\HW1\\\\metahorse\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-11da1bf7\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"bg-light\">\r\n    <div class=\"container-fluid\"\r\n        v-if=\"favorite.length === 0\">\r\n      <div class=\"d-flex flex-column justify-content-center align-items-center\">\r\n        <h1 class=\"fs-2 text-center fw-bold mb-5\">目前沒有收藏任何商品</h1>\r\n        <RouterLink to=\"products\" type=\"button\" class=\"btn btn-outline-primary text-dark fw-bold fs-5\">回產品列表</RouterLink>\r\n      </div>\r\n    </div>\r\n    <div class=\"container pt-5\">\r\n      <div class=\"row g-4 justify-content-center\"\r\n          v-if=\"favorite.length !== 0\">\r\n        <div class=\"d-flex justify-content-center\">\r\n          <h1 class=\"fs-2 text-center fw-bold\">我的最愛</h1>\r\n        </div>\r\n        <div class=\"col-md-6 col-lg-4 col-12\"\r\n            v-for=\"item in favorite\" :key=\"item.id\">\r\n          <div class=\"card rounded-3\">\r\n            <div class=\"card-img overflow-hidden position-relative scale\">\r\n              <button class=\"btn bg-dark fs-4 position-absolute text-white w-100 h-100 bg-opacity-75\" type=\"button\"\r\n              @click.prevent=\"goProduct(item.id)\">\r\n                詳細資訊\r\n              </button>\r\n              <img class=\"rounded-3 img-fit\"\r\n                  :src=\"item.imageUrl\" alt=\"商品照片\">\r\n            </div>\r\n\r\n            <div class=\"card-body d-flex flex-column justify-content-center text-center fw-bold\">\r\n              <span class=\"fs-4\">\r\n                {{ item.title }}\r\n                <span class=\"fs-6 text-muted\">（{{ item.category }}）</span>\r\n              </span>\r\n              <span class=\"fs-5\">\r\n                NT ${{ item.price }}\r\n                <span class=\"text-muted text-decoration-line-through fs-6 ms-1\">${{ item.origin_price }}</span>\r\n              </span>\r\n              <div class=\"px-3 py-2 d-flex justify-content-between\">\r\n                <button type=\"button\"\r\n                        class=\"btn btn-outline-secondary fw-bold fs-5 px-3\"\r\n                        @click.stop=\"removeFavorite(item.id)\">\r\n                  移除收藏\r\n                </button>\r\n                <button type=\"button\"\r\n                        class=\"btn btn-outline-primary text-dark fw-bold fs-5 px-3\"\r\n                        :disabled=\"this.status.loadingItem === item.id\"\r\n                        @click.stop=\"addCart(item.id)\">\r\n                  <div v-if=\"this.status.loadingItem === item.id\"\r\n                        class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                  </div>\r\n                加到購物車\r\n              </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <UserFooter/>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/methods/emitter'\r\nimport UserFooter from '@/components/UserFooter.vue'\r\nexport default {\r\n\r\n  data () {\r\n    return {\r\n      favorite: [],\r\n      favoriteIds: [],\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    UserFooter\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url).then((res) => {\r\n        this.products = res.data.products\r\n        // console.log('products:', res)\r\n        this.isLoading = false\r\n        this.getFavoriteIds()\r\n      })\r\n    },\r\n    getFavorite () {\r\n      this.favorite = []\r\n      this.products.forEach((item) => {\r\n        if (this.favoriteIds.indexOf(item.id) > -1) {\r\n          this.favorite.push(item)\r\n        }\r\n      })\r\n      emitter.emit('updateFavorite', this.favorite)\r\n      console.log('this.favorite', this.favorite)\r\n    },\r\n    getFavoriteIds () {\r\n      this.favoriteIds = JSON.parse(localStorage.getItem('favoriteIds')) || []\r\n      console.log(this.favoriteIds)\r\n      this.getFavorite()\r\n    },\r\n    removeFavorite (item) {\r\n      this.favoriteIds.splice(this.favoriteIds.indexOf(item), 1)\r\n      localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      this.getFavoriteIds()\r\n      emitter.emit('update-favoriteIds') // 傳送到UserNavbar\r\n    },\r\n    addCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1 // 產品數量\r\n      }\r\n      this.$http.post(url, { data: cart })\r\n        .then((res) => {\r\n          // 等到ajax成功之後，再把id清空\r\n          this.status.loadingItem = ''\r\n          console.log('加入購物車後回傳的訊息', res)\r\n          this.getCart()\r\n          emitter.emit('update-cart')\r\n        })\r\n    },\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.$http.get(url).then((res) => {\r\n        console.log('重新取得購物車訊息', res)\r\n        // 包含陣列列表、總金額\r\n        this.cart = res.data.data\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    goProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.img-fit{\r\n  width: 100%;\r\n  object-fit: cover;\r\n  transition: .5s;\r\n}\r\n.scale{\r\n  &:hover{\r\n    .btn{\r\n      opacity: 1;\r\n    }\r\n    img{\r\n      transform: scale(1.15);\r\n    }\r\n  }\r\n}\r\n.bg-dark{\r\n  z-index: 1; // 往上拉才點的到，不然會點到a標籤\r\n  opacity: 0;\r\n  transition: 0.5s;\r\n}\r\n</style>\r\n","import { render } from \"./UserFavorite.vue?vue&type=template&id=ad0560ee&scoped=true\"\nimport script from \"./UserFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavorite.vue?vue&type=script&lang=js\"\n\nimport \"./UserFavorite.vue?vue&type=style&index=0&id=ad0560ee&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\HW1\\\\metahorse\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ad0560ee\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_6","_hoisted_9","_hoisted_12","href","target","_createElementBlock","_hoisted_3","onClick","_hoisted_14","_hoisted_15","script","__exports__","render","role","_hoisted_22","$data","length","_hoisted_4","_createVNode","_component_RouterLink","to","type","_hoisted_8","_Fragment","_renderList","item","key","id","$options","_hoisted_11","src","imageUrl","alt","title","_toDisplayString","category","price","origin_price","_hoisted_19","disabled","status","loadingItem","_hoisted_23","_component_UserFooter","data","favorite","favoriteIds","isLoading","components","UserFooter","inject","methods","getProducts","url","this","$http","get","then","res","products","getFavoriteIds","getFavorite","forEach","indexOf","push","emitter","console","log","JSON","parse","localStorage","getItem","removeFavorite","splice","setItem","stringify","addCart","cart","product_id","qty","post","getCart","goProduct","$router","created"],"sourceRoot":""}