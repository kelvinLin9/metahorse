"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[949],{4677:function(t,o,e){var a=e(6265),n=e.n(a),l=e(1120),c=e(4301),s=e(6294);const r=(0,s.Z)();o["Z"]=(0,c.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";r.isLoading=!0,n().get(t).then((t=>{console.log("GETC!!!!!!!!!!!!!!!!"),this.cartNum=t.data.data.carts.length,this.cart=t.data.data,r.isLoading=!1})).catch((t=>console.error(t)))},updateCart(t){const o=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t.id}`;r.isLoading=!0,r.cartLoadingItem=t.id;const e={product_id:t.product_id,qty:t.qty};n().put(o,{data:e}).then((t=>{r.cartLoadingItem="",this.getCart()})).catch((t=>console.error(t)))},removeCartItem(t){r.cartLoadingItem=t;const o=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;r.isLoading=!0,n()["delete"](o).then((t=>{console.log(t),r.PushManager(t,"移除購物車品項"),r.cartLoadingItem="",this.getCart(),r.isLoading=!1})).catch((t=>console.error(t)))},addCart(t,o=1){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";r.cartLoadingItem=t;const a={product_id:t,qty:o};n().post(e,{data:a}).then((t=>{r.cartLoadingItem="",this.getCart(),r.PushManager(t,"加入購物車")})).catch((t=>console.error(t)))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",o=this.form;n().post(t,{data:o}).then((t=>{l.Z.push(`/checkoutPay/${t.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((t=>console.error(t)))}}})},2974:function(t,o,e){var a=e(6265),n=e.n(a),l=e(4301),c=e(6294),s=e(4677);const r=(0,c.Z)(),i=(0,s.Z)();o["Z"]=(0,l.Q_)("couponStore",{state:()=>({coupon_code:"",coupons:[{id:1,img:"https://imgur.com/DiAWuvX.jpg",discount:"5折",code:"diamond"},{id:2,img:"https://imgur.com/MWLitCH.jpg",discount:"7折",code:"gold"},{id:3,img:"https://imgur.com/nlpr8b8.jpg",discount:"8折",code:"silver"}],coupon:{},draw:!1}),actions:{addCouponCode(t){this.coupon_code=t;const o="https://vue3-course-api.hexschool.io/api/kelvinlin9/coupon",e={code:`${t}`};r.isLoading=!0,n().post(o,{data:e}).then((t=>{r.PushManager(t,"加入優惠券"),i.getCart(),r.isLoading=!1,this.coupon_code=""})).catch((t=>console.error(t)))},luckyDraw(t,o){console.log(t,o);const e=Math.floor(Math.random()*(o-t+1))+t;this.coupon=this.coupons[e],this.draw=!0},copyCouponCode(){const t=document.getElementById("couponCode"),o=window.getSelection();o.removeAllRanges();const e=document.createRange();e.selectNodeContents(t),o.addRange(e),document.execCommand("copy"),r.PushManager("抽獎","複製折扣碼")}}})},8778:function(t,o,e){var a=e(1120),n=e(4301),l=e(4677);const c=(0,l.Z)();o["Z"]=(0,n.Q_)("goStore",{actions:{goCart(){a.Z.push("/cart"),c.cartBoxState=!1},goProducts(){a.Z.push("/products"),c.cartBoxState=!1},goProduct(t){a.Z.push(`/product/${t}`)},goCheckout(){a.Z.push("/checkout")}}})},6294:function(t,o,e){var a=e(4301);o["Z"]=(0,a.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{PushManager(t,o="更新"){if("抽獎"==t||t.data.success){const t={style:"success",title:`${o}成功`};this.messages.push(t)}else{const e="string"===typeof t.data.message?[t.data.message]:t.data.message,a={style:"danger",title:`${o}失敗`,content:e.join("、")};this.messages.push(a)}}}})},607:function(t,o,e){e.d(o,{Z:function(){return M}});var a=e(3396),n=e(7139);const l=t=>((0,a.dD)("data-v-96a6483c"),t=t(),(0,a.Cn)(),t),c={class:"container my-5 checkout-bar w-75"},s={class:"row fs-5 fs-md-3 fw-bold"},r={key:0,style:{color:"#f4696b"},class:"la-ball-climbing-dot la-dark"},i=l((()=>(0,a._)("div",null,null,-1))),d=l((()=>(0,a._)("div",null,null,-1))),u=l((()=>(0,a._)("div",null,null,-1))),p=l((()=>(0,a._)("div",null,null,-1))),g=[i,d,u,p],m=(0,a.Uk)(" 購物車 "),h={key:1,style:{color:"#f4696b"},class:"la-ball-climbing-dot la-dark"},_=l((()=>(0,a._)("div",null,null,-1))),b=l((()=>(0,a._)("div",null,null,-1))),k=l((()=>(0,a._)("div",null,null,-1))),f=l((()=>(0,a._)("div",null,null,-1))),v=[_,b,k,f],y=(0,a.Uk)(" 填寫"),w=l((()=>(0,a._)("br",{class:"d-block d-sm-none"},null,-1))),C=(0,a.Uk)("訂單 "),x={key:2,style:{color:"#f4696b"},class:"la-ball-climbing-dot la-dark"},$=l((()=>(0,a._)("div",null,null,-1))),Z=l((()=>(0,a._)("div",null,null,-1))),D=l((()=>(0,a._)("div",null,null,-1))),U=l((()=>(0,a._)("div",null,null,-1))),q=[$,Z,D,U],I=(0,a.Uk)(" 確認"),L=l((()=>(0,a._)("br",{class:"d-block d-sm-none"},null,-1))),P=(0,a.Uk)("付款 ");function N(t,o){const e=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",s,["cart"===this.$route.name?((0,a.wg)(),(0,a.iD)("div",r,g)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)(["col d-flex flex-column px-2 py-3 align-items-center rounded-pill",{"bg-primary":"cart"===this.$route.name}])},[(0,a.Wm)(e,{icon:"fa-solid fa-1"}),m],2),"checkout"===this.$route.name?((0,a.wg)(),(0,a.iD)("div",h,v)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)(["col d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkout"===this.$route.name}])},[(0,a.Wm)(e,{icon:"fa-solid fa-2"}),y,w,C],2),"checkoutPay"===this.$route.name?((0,a.wg)(),(0,a.iD)("div",x,q)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)(["col d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkoutPay"===this.$route.name}])},[(0,a.Wm)(e,{icon:"fa-solid fa-3"}),I,L,P],2)])])}var S=e(89);const z={},B=(0,S.Z)(z,[["render",N],["__scopeId","data-v-96a6483c"]]);var M=B},9949:function(t,o,e){e.r(o),e.d(o,{default:function(){return st}});var a=e(3396),n=e(7139),l=e(9242);const c=t=>((0,a.dD)("data-v-26450cc2"),t=t(),(0,a.Cn)(),t),s={class:"container my-5"},r=c((()=>(0,a._)("div",{class:"d-flex justify-content-center"},[(0,a._)("h1",{class:"fs-2 text-center fw-bold"},"購物清單")],-1))),i={class:"row mt-2"},d={class:"col"},u={class:"table align-middle"},p=c((()=>(0,a._)("thead",{class:"table-primary"},[(0,a._)("tr",null,[(0,a._)("th",null,"刪除"),(0,a._)("th",null,"品名"),(0,a._)("th",{class:"d-none d-sm-block"},"圖片"),(0,a._)("th",null,"單價"),(0,a._)("th",{style:{width:"80px"}},"數量"),(0,a._)("th",null,"總價")])],-1))),g=["disabled","onClick"],m=c((()=>(0,a._)("i",{class:"bi bi-x"},null,-1))),h=[m],_={class:"font-sm"},b=c((()=>(0,a._)("br",null,null,-1))),k={key:0,class:"text-secondary fw-bold"},f=(0,a.Uk)(" 已套用優惠券"),v=c((()=>(0,a._)("br",null,null,-1))),y=c((()=>(0,a._)("br",null,null,-1))),w={class:"d-none d-sm-block"},C=["src"],x={class:"font-sm"},$=(0,a.Uk)(" NT$"),Z=c((()=>(0,a._)("br",{class:"d-md-none"},null,-1))),D={class:"input-group input-group-sm"},U=["disabled","onChange","onUpdate:modelValue","onInput"],q={class:"font-sm"},I={key:0},L={key:1},P=c((()=>(0,a._)("small",{class:"text-secondary"}," 折扣價： ",-1))),N=c((()=>(0,a._)("br",{class:"d-lg-none"},null,-1))),S={key:0},z={colspan:"7",class:"text-end fs-3"},B={key:1},M={colspan:"7",class:"text-end fs-4"},T={key:2},j={colspan:"7",class:"text-end text-secondary fw-bold fs-3"},W={key:0,class:"input-group mb-3 input-group-sm"},Q={class:"input-group-append"},A={key:1,class:"d-flex justify-content-between mt-5"},H=c((()=>(0,a._)("i",{class:"bi bi-caret-left-fill"},null,-1))),R=(0,a.Uk)("商品列表 "),V=[H,R],E=(0,a.Uk)(" 填寫資料"),F=c((()=>(0,a._)("i",{class:"bi bi-caret-right-fill"},null,-1))),G=[E,F],Y={key:2,class:"text-center pt-4"},K=c((()=>(0,a._)("h3",{class:"fw-bold"},"購物車還沒有任何商品，趕快挑選產品加入購物車 !",-1)));function O(t,o,e,c,m,H){const R=(0,a.up)("UserCheckoutBar");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(R),(0,a._)("div",s,[r,(0,a._)("div",i,[(0,a._)("div",d,[(0,a._)("table",u,[p,(0,a._)("tbody",null,[t.cart.carts?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(t.cart.carts,(o=>((0,a.wg)(),(0,a.iD)("tr",{key:o.id},[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",disabled:t.cartLoadingItem===o.id,onClick:e=>t.removeCartItem(o.id)},h,8,g)]),(0,a._)("td",_,[(0,a.Uk)((0,n.zw)(o.product.title),1),b,o.coupon?((0,a.wg)(),(0,a.iD)("small",k,[f,v,(0,a.Uk)(" ("+(0,n.zw)(o.final_total/o.total*100)+"% OFF)",1),y,(0,a.Uk)(" 代碼："+(0,n.zw)(o.coupon.code),1)])):(0,a.kq)("",!0)]),(0,a._)("td",w,[(0,a._)("img",{src:o.product.imageUrl,alt:"商品照片",width:"50"},null,8,C)]),(0,a._)("td",x,[$,Z,(0,a.Uk)(" "+(0,n.zw)(o.product.price),1)]),(0,a._)("td",null,[(0,a._)("div",D,[(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",min:"1",disabled:o.id===t.cartLoadingItem,onChange:e=>t.updateCart(o),"onUpdate:modelValue":t=>o.qty=t,onInput:t=>o.qty=Number(t.target.value.replace(/^(0+)|[^\d]+/g,""))||1},null,40,U),[[l.nr,o.qty,void 0,{number:!0}]])])]),(0,a._)("td",q,[o.final_total===o.total?((0,a.wg)(),(0,a.iD)("div",I," NT$ "+(0,n.zw)(t.$filters.currency(o.final_total)),1)):(0,a.kq)("",!0),o.final_total!==o.total?((0,a.wg)(),(0,a.iD)("div",L,[P,N,(0,a.Uk)(" NT$ "+(0,n.zw)(t.$filters.currency(o.final_total)),1)])):(0,a.kq)("",!0)])])))),128)):(0,a.kq)("",!0)]),(0,a._)("tfoot",null,[t.cart.final_total==t.cart.total?((0,a.wg)(),(0,a.iD)("tr",S,[(0,a._)("td",z," 總計：NT$ "+(0,n.zw)(t.$filters.currency(t.cart.total)),1)])):(0,a.kq)("",!0),t.cart.final_total!==t.cart.total?((0,a.wg)(),(0,a.iD)("tr",B,[(0,a._)("td",M,[(0,a._)("del",null,"總計：NT$ "+(0,n.zw)(t.$filters.currency(t.cart.total)),1)])])):(0,a.kq)("",!0),t.cart.final_total!==t.cart.total?((0,a.wg)(),(0,a.iD)("tr",T,[(0,a._)("td",j," 折扣價：NT$ "+(0,n.zw)(t.$filters.currency(t.cart.final_total)),1)])):(0,a.kq)("",!0)])]),0!==t.cart.total?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":o[0]||(o[0]=o=>t.coupon_code=o)},null,512),[[l.nr,t.coupon_code]]),(0,a._)("div",Q,[(0,a._)("button",{class:"btn btn-outline-secondary fw-bold btn-lg",type:"button",onClick:o[1]||(o[1]=o=>t.addCouponCode(t.coupon_code))}," 套用優惠碼 ")])])):(0,a.kq)("",!0),0!==t.cart.total?((0,a.wg)(),(0,a.iD)("div",A,[(0,a._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg",onClick:o[2]||(o[2]=(...o)=>t.goProducts&&t.goProducts(...o))},V),(0,a._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg",onClick:o[3]||(o[3]=(...o)=>t.goCheckout&&t.goCheckout(...o))},G)])):(0,a.kq)("",!0),0===t.cart.total?((0,a.wg)(),(0,a.iD)("div",Y,[K,(0,a._)("button",{type:"button",class:"btn btn-dark btn-hover rounded-0 mt-5",onClick:o[4]||(o[4]=(...o)=>t.goProducts&&t.goProducts(...o))}," 查看產品 Go ")])):(0,a.kq)("",!0)])])])],64)}var X=e(607),J=e(4301),tt=e(6294),ot=e(4677),et=e(8778),at=e(2974),nt={components:{UserCheckoutBar:X.Z},computed:{...(0,J.rn)(tt.Z,["cartLoadingItem"]),...(0,J.rn)(ot.Z,["cart"]),...(0,J.Ah)(at.Z,["coupon_code"])},methods:{...(0,J.nv)(ot.Z,["getCart","updateCart","removeCartItem"]),...(0,J.nv)(et.Z,["goProducts","goCheckout"]),...(0,J.nv)(at.Z,["addCouponCode"])}},lt=e(89);const ct=(0,lt.Z)(nt,[["render",O],["__scopeId","data-v-26450cc2"]]);var st=ct}}]);
//# sourceMappingURL=949.cb6c12c1.js.map