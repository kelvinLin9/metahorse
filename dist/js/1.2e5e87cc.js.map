{"version":3,"file":"js/1.2e5e87cc.js","mappings":"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","sources":["webpack://hw1/./src/stores/cartStore.js","webpack://hw1/./src/stores/favoriteStore.js","webpack://hw1/./src/stores/productStore.js","webpack://hw1/./src/stores/statusStore.js","webpack://hw1/./src/views/UserProduct.vue","webpack://hw1/./src/views/UserProduct.vue?c4ac"],"sourcesContent":["import axios from 'axios'\r\nimport { defineStore } from 'pinia'// 起手式\r\nimport statusStore from './statusStore'\r\n\r\n// 所有資料帶出來存到status\r\n// 把原本this改成status\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    cart: {},\r\n    cartNum: 0,\r\n    cartBoxState: false\r\n    // qty: 1 // 不需要 傳到後端就好\r\n  }),\r\n  actions: {\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      status.isLoading = true\r\n      axios.get(url)\r\n        .then((res) => {\r\n          console.log(\"GETC!!!!!!!!!!!!!!!!\")\r\n          this.cartNum = res.data.data.carts.length\r\n          console.log('this.cartNum', this.cartNum)\r\n          this.cart = res.data.data\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    // 更改購物車商品數量\r\n    updateCart (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      status.isLoading = true\r\n      status.cartLoadingItem = item.id\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty\r\n      }\r\n      axios.put(url, { data: cart })\r\n        .then((res) => {\r\n          status.cartLoadingItem = ''\r\n          this.getCart()\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    removeCartItem (id) {\r\n      status.cartLoadingItem = id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      status.isLoading = true\r\n      axios.delete(url)\r\n        .then((res) => {\r\n          console.log(res)\r\n          status.PushManager(res, '移除購物車品項')\r\n          status.cartLoadingItem = ''\r\n          this.getCart()\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    addCart (id, qty = 1) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      status.cartLoadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      axios.post(url, { data: cart })\r\n        .then((res) => {\r\n          status.cartLoadingItem = ''\r\n          this.getCart() // 重新取得購物車資料\r\n          status.PushManager(res, '加入購物車')\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    cartBoxToggle () {\r\n      // 傳到ToastMessages 讓提示能移開避免擋到\r\n      this.cartBoxState = !this.cartBoxState\r\n      \r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'// 起手式\r\n\r\nexport default defineStore('favoriteStore', {\r\n  state: () => ({\r\n    favorite: [],\r\n    favoriteIds: [],\r\n    favoriteNum: 0,\r\n    products: []\r\n  }),\r\n  actions: {\r\n    productsBus(products){\r\n      this.products = products\r\n      this.getFavorite ()\r\n    },\r\n    getFavoriteIds () {\r\n      this.favoriteIds = JSON.parse(localStorage.getItem('favoriteIds')) || []\r\n    },\r\n    getFavorite () {\r\n      this.getFavoriteIds()\r\n      this.favorite = []\r\n      this.products.forEach((item) => {\r\n        if (this.favoriteIds.indexOf(item.id) > -1) {\r\n          this.favorite.push(item)\r\n        }\r\n      })\r\n      this.favoriteNum = this.favorite.length\r\n    },\r\n    toggleFavorite (item) {\r\n      const clickId = item\r\n      const hasFavorite = this.favoriteIds.some((item) => item === clickId) // v-on 所以只判斷點擊的那一次\r\n      if (!hasFavorite) {\r\n        this.favoriteIds.push(item)\r\n        localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      } else {\r\n        const delItem = this.favoriteIds.find((item) => {\r\n          return item === clickId\r\n        })\r\n        this.favoriteIds.splice(this.favoriteIds.indexOf(delItem), 1)\r\n        localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      }\r\n      this.getFavorite()\r\n    },\r\n    removeFavorite (item) {\r\n      this.favoriteIds.splice(this.favoriteIds.indexOf(item), 1)\r\n      localStorage.setItem('favoriteIds', JSON.stringify(this.favoriteIds))\r\n      this.getFavorite()\r\n    }\r\n  },\r\n  getters: {\r\n    favState () {\r\n      return (id) => {\r\n        return this.favoriteIds.indexOf(id) > -1 ? 'bi bi-heart-fill' : 'bi bi-heart'\r\n      }\r\n    }\r\n  }\r\n})\r\n","import axios from 'axios'\r\n// 起手式\r\nimport { defineStore } from 'pinia'\r\nimport statusStore from './statusStore'\r\nimport favoriteStore from './favoriteStore'\r\n\r\n// 所有資料帶出來存到status\r\n// 把原本this改成status\r\nconst status = statusStore()\r\nconst favorite = favoriteStore()\r\n\r\nexport default defineStore('productStore', {\r\n  state: () => ({\r\n    products: [],\r\n    product: {},\r\n    productsHot: [],\r\n    productsGame: [],\r\n    temp: {}, // 暫存點擊到的賽馬資訊\r\n    category: 'all'\r\n  }),\r\n  actions: {\r\n    getProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      status.isLoading = true\r\n      axios.get(url)\r\n        .then((res) => {\r\n          console.log(\"GETP!!!!!!!!!!!!!!!!\")\r\n          this.products = res.data.products\r\n          this.productsHot = this.products.filter((item, index) => index > 14) // 先取幾個來試用\r\n          favorite.productsBus(this.products)\r\n          // 手動挑出想展示的商品(首頁用)\r\n          this.productsGame = []\r\n          this.productsGame.push(res.data.products[11])\r\n          this.productsGame.push(res.data.products[10])\r\n          this.productsGame.push(res.data.products[8])\r\n          this.productsGame.push(res.data.products[5])\r\n          this.temp = this.productsGame[0]\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    getProduct (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`\r\n      status.isLoading = true\r\n      axios.get(api).then((res) => {\r\n        status.isLoading = false\r\n        if (res.data.success) {\r\n          this.product = res.data.product\r\n          // 自己補上後端沒有的預設值\r\n          this.product.qty = 1\r\n        }\r\n      })\r\n    },\r\n    // 無法雙向綁定的另種解法\r\n    // 創一個新的函數傳遞category\r\n    setCategory (i) {\r\n      this.category = i\r\n    }\r\n  },\r\n  getters: {\r\n    filterProducts () {\r\n      let filterProducts\r\n      switch (this.category) {\r\n        case 'all':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item\r\n          })\r\n          break\r\n        case 'S':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'S'\r\n          })\r\n          break\r\n        case 'A':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'A'\r\n          })\r\n          break\r\n        case 'B':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'B'\r\n          })\r\n          break\r\n        case 'C':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.category === 'C'\r\n          })\r\n          break\r\n        case '馬鞍':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.description === '馬鞍'\r\n          })\r\n          break\r\n        case '馬蹄鐵':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.description === '馬蹄鐵'\r\n          })\r\n          break\r\n        case '馬飼料':\r\n          filterProducts = this.products.filter((item) => {\r\n            return item.description === '馬飼料'\r\n          })\r\n          break\r\n      }\r\n      return filterProducts\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: [],\r\n    cartLoadingItem: '',\r\n    messages: []\r\n  }),\r\n  actions: {\r\n    // 傳到ToastMessages.vue\r\n    PushManager (res, title = '更新') {\r\n      if (res.data.success) {\r\n        const obj = {\r\n          style: 'success',\r\n          title: `${title}成功`\r\n        }\r\n        this.messages.push(obj)\r\n      } else {\r\n        // 有些訊息是字串，有些則是陣列，在此統一格式\r\n        const message = typeof res.data.message === 'string'\r\n          ? [res.data.message]\r\n          : res.data.message\r\n        const obj = {\r\n          style: 'danger',\r\n          title: `${title}失敗`,\r\n          content: message.join('、')\r\n        }\r\n        this.messages.push(obj)\r\n      }\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container my-5\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item fs-5\">\r\n          <router-link to=\"/products\" class=\"fw-bold bg-dark\">\r\n            產品列表\r\n          </router-link>\r\n        </li>\r\n        <li class=\"breadcrumb-item active fs-5\" aria-current=\"page\">\r\n          {{ product.title }}\r\n        </li>\r\n      </ol>\r\n    </nav>\r\n    <div class=\"row justify-content-center\">\r\n\r\n      <div class=\"col-md-6 position-relative\">\r\n        <img :src=\"product.imageUrl\" alt=\"商品照片\" class=\"img-fluid mb-3 rounded h-100\">\r\n\r\n        <span class=\"position-absolute rounded-circle fs-2 p-1 fav-icon bg-white text-center\"\r\n            @click.stop=\"toggleFavorite(product.id)\">\r\n          <i :class=\"favState(id)\"></i>\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"col-md-6 d-flex flex-column\">\r\n        <h2>{{ product.title }}</h2>\r\n        <div>{{ product.description }}</div>\r\n        <hr>\r\n        <h5>{{product.content}}</h5>\r\n        <hr>\r\n\r\n        <div class=\"w-50\" v-if=\"product.speed\">\r\n          <h5>遊戲中素質：</h5>\r\n          <span>速度<i class=\"bi bi-lightning-fill mx-1\"></i></span>\r\n          <div class=\"progress mb-3\">\r\n            <div class=\"progress-bar text-dark fw-bold\" role=\"progressbar\" :style=\"{width: `${product.speed*20}%`}\">\r\n              {{product.speed}} / 5\r\n            </div>\r\n          </div>\r\n          <span>耐力<i class=\"bi bi-clock-fill mx-1\"></i></span>\r\n          <div class=\"progress mb-3\">\r\n            <div class=\"progress-bar text-dark fw-bold\" role=\"progressbar\" :style=\"{width: `${product.stamina*20}%`}\">\r\n              {{product.stamina}} / 5\r\n            </div>\r\n          </div>\r\n          <span>幸運<i class=\"bi bi-dice-6-fill mx-1\"></i></span>\r\n          <div class=\"progress mb-3\">\r\n            <div class=\"progress-bar text-dark fw-bold\" role=\"progressbar\" :style=\"{width: `${product.lucky*20}%`}\">\r\n              {{product.lucky}} / 5\r\n            </div>\r\n          </div>\r\n          <span>智慧<i class=\"bi bi-mortarboard-fill mx-1\"></i></span>\r\n          <div class=\"progress mb-3\">\r\n            <div class=\"progress-bar text-dark fw-bold\" role=\"progressbar\" :style=\"{width: `${product.intelligence*20}%`}\">\r\n              {{product.intelligence}} / 5\r\n            </div>\r\n          </div>\r\n          <hr>\r\n        </div>\r\n\r\n        <div class=\"h5\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\r\n        <del class=\"h6\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\r\n        <div class=\"h5\" v-if=\"product.price\">現在只要 {{ product.price }} 元</div>\r\n        <hr>\r\n\r\n        <div class=\"row mt-auto\">\r\n          <div class=\"input-group input-group-sm col\">\r\n            <input type=\"number\" class=\"form-control\"\r\n                  min=\"1\"\r\n                  :disabled=\"product.id === cartLoadingItem\"\r\n                  v-model.number=\"product.qty\"\r\n                  @input=\"product.qty = Number($event.target.value.replace(/^(0+)|[^\\d]+/g, '')) || 1\">\r\n          </div>\r\n\r\n          <button type=\"button\"\r\n                  class=\"col-9 btn btn-outline-primary text-dark fw-bold fs-5\"\r\n                  :disabled=\"cartLoadingItem === product.id\"\r\n                  @click=\"addCart(product.id, product.qty)\">\r\n            <div v-if=\"cartLoadingItem === product.id\"\r\n                  class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n            加到購物車\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"my-5\">\r\n      <h2 class=\"fs-2 text-center fw-bold\">常見問題</h2>\r\n<div class=\"accordion\" id=\"accordionExample\">\r\n  <div class=\"accordion-item\">\r\n    <h2 class=\"accordion-header\" id=\"headingOne\">\r\n      <button class=\"accordion-button fw-bold text-dark fs-5\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapse1\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n        我該如何取得NFT\r\n      </button>\r\n    </h2>\r\n    <div id=\"collapse1\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n      <div class=\"accordion-body\">\r\n        付款完成之後，我們將在3個工作日內將NFT轉移至您的錢包\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"accordion-item\">\r\n    <h2 class=\"accordion-header\" id=\"headingOne\">\r\n      <button class=\"accordion-button fw-bold text-dark fs-5\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapse2\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n        我能擁有一匹真正的賽馬嗎\r\n      </button>\r\n    </h2>\r\n    <div id=\"collapse2\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n      <div class=\"accordion-body\">\r\n        每個NFT都對應到一匹真實的馬，透過遊戲，在錦標賽最終獲勝的玩家將能獲得一匹真實的馬\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"accordion-item\">\r\n    <h2 class=\"accordion-header\" id=\"headingOne\">\r\n      <button class=\"accordion-button fw-bold text-dark fs-5\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapse3\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n        遊戲什麼時候會開放\r\n      </button>\r\n    </h2>\r\n    <div id=\"collapse3\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n      <div class=\"accordion-body\">\r\n        根據我們的路線圖，我們將在2022年第四季度提供Beta測試版\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'pinia'\r\nimport statusStore from '@/stores/statusStore'\r\nimport productStore from '@/stores/productStore'\r\nimport cartStore from '@/stores/cartStore'\r\nimport favoriteStore from '@/stores/favoriteStore'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      id: '',\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(favoriteStore, ['favorite', 'favoriteIds', 'favIcons', 'favState']),\r\n    ...mapState(productStore, ['products', 'product']),\r\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\r\n  },\r\n  methods: {\r\n    ...mapActions(favoriteStore, ['getFavorite', 'getFavoriteIds', 'toggleFavorite']),\r\n    ...mapActions(productStore,['getProducts','getProduct']),\r\n    ...mapActions(cartStore,['addCart']),\r\n  },\r\n  created () {\r\n    this.id = this.$route.params.productId\r\n    this.getProduct(this.id)\r\n  }\r\n}\r\n</script >\r\n<style lang=\"scss\" scoped>\r\n.fav-icon {\r\n  width: 50px;\r\n  height: 50px;\r\n  color: rgb(201, 54, 54);\r\n  top: 5px;\r\n  right: 15px;\r\n  z-index: 2;\r\n}\r\n</style>\r\n","import { render } from \"./UserProduct.vue?vue&type=template&id=1ab322ce&scoped=true\"\nimport script from \"./UserProduct.vue?vue&type=script&lang=js\"\nexport * from \"./UserProduct.vue?vue&type=script&lang=js\"\n\nimport \"./UserProduct.vue?vue&type=style&index=0&id=1ab322ce&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\kelvi\\\\Desktop\\\\github\\\\metahorse\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1ab322ce\"]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","cart","cartNum","cartBoxState","actions","getCart","url","isLoading","axios","then","res","console","log","this","data","carts","length","catch","err","error","updateCart","item","id","cartLoadingItem","product_id","qty","removeCartItem","PushManager","addCart","cartBoxToggle","favorite","favoriteIds","favoriteNum","products","productsBus","getFavorite","getFavoriteIds","JSON","parse","localStorage","getItem","forEach","indexOf","push","toggleFavorite","clickId","hasFavorite","some","delItem","find","splice","setItem","stringify","removeFavorite","getters","favState","favoriteStore","product","productsHot","productsGame","temp","category","getProducts","filter","index","getProduct","api","success","setCategory","i","filterProducts","description","messages","title","obj","style","message","content","join","class","_createElementVNode","role","_hoisted_33","_createVNode","_component_Loading","active","_ctx","_component_router_link","to","_toDisplayString","src","imageUrl","alt","onClick","$data","_hoisted_11","_hoisted_12","speed","_createElementBlock","_hoisted_14","_hoisted_15","width","_hoisted_17","stamina","_hoisted_19","lucky","_hoisted_21","intelligence","_hoisted_23","price","origin_price","_hoisted_27","type","min","disabled","$event","onInput","Number","target","value","replace","_hoisted_34","_hoisted_36","computed","mapState","productStore","methods","mapActions","cartStore","created","$route","params","productId","__exports__","render"],"sourceRoot":""}