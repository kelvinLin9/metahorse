"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[266],{7906:function(t,a,e){e.r(a),e.d(a,{default:function(){return ut}});var s=e(3396);const r={class:"position-relative"};function o(t,a,e,o,n,i){const l=(0,s.up)("UserNavbar"),c=(0,s.up)("FloatCart"),d=(0,s.up)("ToastMessages"),u=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.j4)(l,{key:t.$route.path})),(0,s.Wm)(c),(0,s.Wm)(d),(0,s._)("div",r,[(0,s.Wm)(u)])],64)}var n=e(5820),i=e(8583),l=e(7139),c=e(9242);const d=t=>((0,s.dD)("data-v-234098e8"),t=t(),(0,s.Cn)(),t),u={class:"navbar sticky-top navbar-expand-lg navbar-dark bg-dark"},g={class:"container-fluid"},m=(0,s.uE)('<a class="navbar-brand" href="#" data-v-234098e8><span class="text-warning f-kalam fs-2 text-center" data-v-234098e8>MetaHorse</span><img src="https://i.imgur.com/61qkafr.jpg" alt="logo" width="50" class="logo" data-v-234098e8></a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation" data-v-234098e8><span class="navbar-toggler-icon" data-v-234098e8></span></button>',2),v={class:"collapse navbar-collapse ms-5",id:"navbarNavAltMarkup"},p={class:"navbar-nav"},b={class:"nav-item"},h=(0,s.Uk)("首頁"),f={class:"nav-item"},k=(0,s.Uk)("產品列表"),_={class:"nav-item"},w=(0,s.Uk)("訂單查詢"),x={class:"nav-item d-block d-lg-none"},N=(0,s.Uk)("購物車"),C={class:"nav-item d-block d-lg-none"},y=(0,s.Uk)("我的最愛"),W={class:"nav-item d-block d-lg-none"},D=(0,s.Uk)("管理員登入"),I={class:"d-none d-lg-flex navbar-nav ms-auto me-2"},B={class:"nav-item position-relative"},S=d((()=>(0,s._)("i",{class:"bi bi-cart3 fs-4 cart","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"購物車"},null,-1))),$={key:0,class:"bg-danger text-white rounded-circle text-center position-absolute num"},U={key:0,class:"fw-bold"},Z={class:"table-responsive-md"},M={class:"table table-sm"},q=d((()=>(0,s._)("thead",{class:"table-dark"},[(0,s._)("tr",{class:"table-nowrap text-center"},[(0,s._)("th",{class:"text-start"},"商品名稱"),(0,s._)("th",null,"數量"),(0,s._)("th",{class:"text-end"},"價格"),(0,s._)("th")])],-1))),T={class:"text-center"},z={class:"text-end"},F={class:"text-center"},j=["disabled","onClick"],L=d((()=>(0,s._)("i",{class:"bi bi-x"},null,-1))),A=[L],H={key:1,class:"fw-bold text-center mb-3"},O={class:"d-flex justify-content-end"},P=d((()=>(0,s._)("i",{class:"fas fa-shopping-cart"},null,-1))),Y=(0,s.Uk)(" 結帳去 "),E=(0,s.Uk)(" 選購去 "),J={class:"nav-item position-relative"},K=d((()=>(0,s._)("i",{class:"bi bi-search-heart fs-4","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"我的最愛"},null,-1))),R={key:0,class:"bg-danger text-white rounded-circle text-center position-absolute num"},G={class:"nav-item"},Q=d((()=>(0,s._)("i",{class:"bi bi-person-workspace fs-4","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"管理員登入"},null,-1)));function V(t,a,e,r,o,n){const i=(0,s.up)("RouterLink"),d=(0,s.up)("router-link"),L=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("nav",u,[(0,s._)("div",g,[m,(0,s._)("div",v,[(0,s._)("ul",p,[(0,s._)("li",b,[(0,s.Wm)(i,{to:"/",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"home"===o.routeName}])},{default:(0,s.w5)((()=>[h])),_:1},8,["class"])]),(0,s._)("li",f,[(0,s.Wm)(d,{to:"/products",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"products"===o.routeName}])},{default:(0,s.w5)((()=>[k])),_:1},8,["class"])]),(0,s._)("li",_,[(0,s.Wm)(d,{to:"/checkOrder",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"CheckOrder"===o.routeName}])},{default:(0,s.w5)((()=>[w])),_:1},8,["class"])]),(0,s._)("li",x,[(0,s.Wm)(d,{to:"/cart",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"cart"===o.routeName}])},{default:(0,s.w5)((()=>[N])),_:1},8,["class"])]),(0,s._)("li",C,[(0,s.Wm)(d,{to:"/favorite",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"favorite"===o.routeName}])},{default:(0,s.w5)((()=>[y])),_:1},8,["class"])]),(0,s._)("li",W,[(0,s.Wm)(d,{to:"/login",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"login"===o.routeName}])},{default:(0,s.w5)((()=>[D])),_:1},8,["class"])])]),(0,s._)("ul",I,[(0,s._)("li",B,[(0,s._)("div",{class:(0,l.C_)(["nav-link px-3",{"text-warning":"cart"===o.routeName}]),onClick:a[0]||(a[0]=(0,c.iM)(((...t)=>n.cartBoxToggle&&n.cartBoxToggle(...t)),["prevent"]))},[S,0!==o.cartNum?((0,s.wg)(),(0,s.iD)("div",$,(0,l.zw)(o.cartNum),1)):(0,s.kq)("",!0)],2)]),(0,s._)("div",{class:(0,l.C_)(["dropdown-menu cart-box p-3",{show:o.cartBoxState}])},[o.cartNum>0?((0,s.wg)(),(0,s.iD)("h5",U,"已選購商品")):(0,s.kq)("",!0),(0,s._)("div",Z,[(0,s._)("table",M,[q,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cart.carts,(a=>((0,s.wg)(),(0,s.iD)("tr",{class:"table-nowrap",key:a.id},[(0,s._)("td",null,(0,l.zw)(a.product.title),1),(0,s._)("td",T,(0,l.zw)(a.qty),1),(0,s._)("td",z,"NT$ "+(0,l.zw)(t.$filters.currency(a.total)),1),(0,s._)("td",F,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",disabled:o.status.loadingItem===a.id,onClick:t=>n.removeCartItem(a.id)},A,8,j)])])))),128))])])]),0==o.cartNum?((0,s.wg)(),(0,s.iD)("h5",H,"產品尚未加入購物車!")):(0,s.kq)("",!0),(0,s._)("div",O,[o.cartNum>0?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-dark btn-hover rounded-0",onClick:a[1]||(a[1]=(...t)=>n.goCart&&n.goCart(...t))},[(0,s.Wm)(L,{icon:"fa-solid fa-cash-register"}),P,Y])):((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-dark btn-hover rounded-0",onClick:a[2]||(a[2]=(...t)=>n.goProducts&&n.goProducts(...t))},[(0,s.Wm)(L,{icon:"fa-solid fa-basket-shopping"}),E]))])],2),(0,s._)("li",J,[(0,s.Wm)(i,{to:"/Favorite",class:(0,l.C_)(["nav-link px-3",{"text-warning":"favorite"===o.routeName}])},{default:(0,s.w5)((()=>[K,0!=o.favoriteNum?((0,s.wg)(),(0,s.iD)("div",R,(0,l.zw)(o.favoriteNum),1)):(0,s.kq)("",!0)])),_:1},8,["class"])]),(0,s._)("li",G,[(0,s.Wm)(i,{to:"/login",class:(0,l.C_)(["nav-link px-3",{"text-warning":"login"===o.routeName}])},{default:(0,s.w5)((()=>[Q])),_:1},8,["class"])])])])])])}e(434);var X={data(){return{favorite:[],routeName:"",favoriteNum:0,cartNum:0,cart:{},status:{loadingItem:""},cartBoxState:!1}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cartNum=t.data.data.carts.length,this.cart=t.data.data,this.isLoading=!1,n.Z.emit("cartNum",this.cartNum)}))},getFavoriteNum(){this.favoriteNum=(JSON.parse(localStorage.getItem("favoriteIds"))||[]).length},goCart(){this.$router.push("/cart"),this.cartBoxState=!1},goProducts(){this.$router.push("/products"),this.cartBoxState=!1},removeCartItem(t){console.log(t),this.status.loadingItem=t;const a=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;this.isLoading=!0,this.$http.delete(a).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1}))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState,n.Z.emit("cartBoxState",this.cartBoxState)}},created(){this.getCart(),this.getFavoriteNum()},mounted(){this.routeName=this.$route.name,n.Z.on("update-cart",(()=>{this.getCart()})),n.Z.on("update-favoriteIds",(()=>{this.getFavoriteNum()}))}},tt=e(89);const at=(0,tt.Z)(X,[["render",V],["__scopeId","data-v-234098e8"]]);var et=at;const st={class:"rounded-circle bg-white border border-3 border-warning d-flex justify-content-center align-items-center float-cart"},rt={key:0,class:"bg-danger text-white rounded-circle text-center position-absolute num"};function ot(t,a,e,r,o,n){const i=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("a",{href:"#",onClick:a[0]||(a[0]=(0,c.iM)(((...t)=>n.goCart&&n.goCart(...t)),["prevent"]))},[(0,s.Wm)(i,{icon:"fa-solid fa-cart-shopping",class:"text-dark fs-1"}),0!==o.cartNum?((0,s.wg)(),(0,s.iD)("div",rt,(0,l.zw)(o.cartNum),1)):(0,s.kq)("",!0)])])}var nt={data(){return{cartNum:0}},inject:["emitter"],methods:{goCart(){this.$router.push("/cart")}},mounted(){n.Z.on("cartNum",(t=>{console.log(t),this.cartNum=t}))}};const it=(0,tt.Z)(nt,[["render",ot],["__scopeId","data-v-16254ac4"]]);var lt=it,ct={components:{ToastMessages:i.Z,UserNavbar:et,FloatCart:lt},provide(){return{emitter:n.Z}}};const dt=(0,tt.Z)(ct,[["render",o],["__scopeId","data-v-7f8608f9"]]);var ut=dt}}]);
//# sourceMappingURL=266.2ef4789b.js.map