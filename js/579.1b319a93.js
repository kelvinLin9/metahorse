"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[579],{4677:function(t,e,s){var a=s(6265),i=s.n(a),o=s(1120),r=s(4301),c=s(6294);const d=(0,c.Z)();e["Z"]=(0,r.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";d.isLoading=!0,i().get(t).then((t=>{this.cartNum=t.data.data.carts.length,this.cart=t.data.data,d.isLoading=!1})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t.id}`;d.isLoading=!0,d.cartLoadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};i().put(e,{data:s}).then((()=>{d.cartLoadingItem="",this.getCart()})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"更新","發生錯誤，請重新操作")}))},removeCartItem(t){d.cartLoadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;d.isLoading=!0,i()["delete"](e).then((t=>{d.pushManager(t,"刪除","此項目已移除購物車"),d.cartLoadingItem="",this.getCart(),d.isLoading=!1})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"刪除","發生錯誤，請重新操作")}))},addCart(t,e=1){const s="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";d.cartLoadingItem=t;const a={product_id:t,qty:e};i().post(s,{data:a}).then((t=>{d.cartLoadingItem="",this.getCart(),d.pushManager(t,"更新","已加入購物車")})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",e=this.form;i().post(t,{data:e}).then((t=>{o.Z.push(`/checkoutPay/${t.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"傳送","發生錯誤，請重新填寫資料並送出")}))}}})},9498:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("favoriteStore",{state:()=>({favorite:[],favoriteIds:[],favoriteNum:0,products:[]}),actions:{productsBus(t){this.products=t,this.getFavorite()},getFavoriteIds(){this.favoriteIds=JSON.parse(localStorage.getItem("favoriteIds"))||[]},getFavorite(){this.getFavoriteIds(),this.favorite=[],this.products.forEach((t=>{this.favoriteIds.indexOf(t.id)>-1&&this.favorite.push(t)})),this.favoriteNum=this.favorite.length},toggleFavorite(t){const e=t,s=this.favoriteIds.some((t=>t===e));if(s){const t=this.favoriteIds.find((t=>t===e));this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds))}else this.favoriteIds.push(t),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds));this.getFavorite()},removeFavorite(t){this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds)),this.getFavorite()}},getters:{favState(){return t=>this.favoriteIds.indexOf(t)>-1?"fa-solid fa-heart":"fa-regular fa-heart"}}})},8778:function(t,e,s){var a=s(1120),i=s(4301),o=s(4677);const r=(0,o.Z)();e["Z"]=(0,i.Q_)("goStore",{actions:{goCart(){a.Z.push("/cart"),r.cartBoxState=!1},goProducts(){a.Z.push("/products"),r.cartBoxState=!1},goProduct(t){a.Z.push(`/product/${t}`)},goCheckout(){a.Z.push("/checkout")}}})},4238:function(t,e,s){var a=s(6265),i=s.n(a),o=s(4301),r=s(6294),c=s(9498);const d=(0,r.Z)(),n=(0,c.Z)();e["Z"]=(0,o.Q_)("productStore",{state:()=>({products:[],product:{},productsHot:[],productsGame:[],productsRelated:[],temp:{},category:"all",cacheSearch:""}),actions:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/products/all";d.isLoading=!0,i().get(t).then((t=>{this.products=t.data.products,this.products.forEach((t=>{t.qty=1})),this.productsHot=this.products.filter(((t,e)=>e>14)),n.productsBus(this.products),this.productsGame=[],this.productsGame.push(t.data.products[11]),this.productsGame.push(t.data.products[10]),this.productsGame.push(t.data.products[8]),this.productsGame.push(t.data.products[5]),this.temp=this.productsGame[0],d.isLoading=!1})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},getProduct(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/product/${t}`;d.isLoading=!0,i().get(e).then((t=>{d.isLoading=!1,t.data.success&&(this.product=t.data.product,this.product.qty=1,this.productsRelated=[...this.products],this.productsRelated.splice(20-this.product.num,1),"遊戲道具"===this.product.category?this.productsRelated=this.productsRelated.filter(((t,e)=>"遊戲道具"===t.category)):this.productsRelated=this.productsRelated.filter(((t,e)=>"遊戲道具"!==t.category)))})).catch((()=>{d.isLoading=!1,d.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},setCategory(t){this.category=t}},getters:{filterProducts(){let t;if(""===this.cacheSearch){switch(this.category){case"all":t=this.products.filter((t=>t));break;case"S":t=this.products.filter((t=>"S"===t.category));break;case"A":t=this.products.filter((t=>"A"===t.category));break;case"B":t=this.products.filter((t=>"B"===t.category));break;case"C":t=this.products.filter((t=>"C"===t.category));break;case"馬鞍":t=this.products.filter((t=>"馬鞍"===t.description));break;case"馬蹄鐵":t=this.products.filter((t=>"馬蹄鐵"===t.description));break;case"馬飼料":t=this.products.filter((t=>"馬飼料"===t.description));break}return t}return this.products.filter((t=>t.title.match(this.cacheSearch)))}}})},6294:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{pushManager(t=!0,e="更新",s=""){if(t){const t={style:"success",title:`${e}成功`,content:`${s}`};this.messages.push(t)}else{const t={style:"danger",title:`${e}失敗`,content:`${s}`};this.messages.push(t)}}}})},6197:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("windowStore",{state:()=>({goTopIcon:!1,windowWidth:0}),actions:{scroll(){window.onscroll=t=>{t.target.scrollingElement.scrollTop>350?this.goTopIcon=!0:this.goTopIcon=!1}},getWindowWidth(){this.windowWidth=window.innerWidth,window.addEventListener("resize",(()=>{this.windowWidth=window.innerWidth}))}}})},6579:function(t,e,s){s.r(e),s.d(e,{default:function(){return et}});var a=s(3396),i=s(7139),o=s(9242);const r=t=>((0,a.dD)("data-v-69ef8f1e"),t=t(),(0,a.Cn)(),t),c=(0,a.uE)('<div class="favBanner" data-v-69ef8f1e><div class="bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center" data-v-69ef8f1e><h1 class="w-100 d-flex align-items-center justify-content-center" data-v-69ef8f1e><span class="me-2 fs-1 fw-bolder text-white" data-v-69ef8f1e>我的最愛</span><span class="fs-5 text-primary align-self-end" data-v-69ef8f1e>/ My Favorite</span></h1></div></div>',1),d={class:"pb-5"},n={key:0,class:"container-fluid pt-5"},l={class:"d-flex flex-column justify-content-center align-items-center"},u=r((()=>(0,a._)("h1",{class:"fs-2 text-center fw-bold mb-5"},"目前沒有收藏任何商品",-1))),h=(0,a.Uk)("回產品列表"),p={class:"container pt-4"},g={key:0,class:"row g-4 justify-content-center"},f=["onClick"],v={class:"card-img overflow-hidden position-relative"},m={class:"btn bg-dark fs-4 position-absolute text-white w-100 h-100 bg-opacity-75",type:"button"},w=(0,a.Uk)(" 詳細資訊 "),y=["src"],b={class:"card-body d-flex flex-column justify-content-center text-center fw-bold"},k={class:"fs-4"},_={class:"fs-6 text-muted"},x={class:"fs-5"},I={class:"text-muted text-decoration-line-through fs-6 ms-1"},C={class:"px-2 py-2 d-flex justify-content-between"},L=["onClick"],S=["disabled","onClick"],Z={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},W=r((()=>(0,a._)("span",{class:"visually-hidden"},"Loading...",-1))),F=[W],M=(0,a.Uk)(" 加到購物車 "),$={key:1,class:"table-responsive"},B={class:"table table-sm align-middle"},P=r((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"text-center table-primary"},[(0,a._)("th",null,"圖片"),(0,a._)("th",null,"品名"),(0,a._)("th",null,"單價"),(0,a._)("th"),(0,a._)("th")])],-1))),D={class:"text-center"},N={style:{width:"70px"},class:"card-img overflow-hidden position-relative scale"},q=["src","onClick"],z={class:"fs-7"},O=r((()=>(0,a._)("br",null,null,-1))),R={class:"fs-7 text-muted"},U={class:"fs-8"},G=["onClick"],T=["onClick"];function Q(t,e,s,r,W,Q){const j=(0,a.up)("RouterLink"),E=(0,a.up)("FontAwesomeIcon"),H=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[c,(0,a._)("div",d,[0===t.favorite.length?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",l,[u,(0,a.Wm)(j,{to:"products",type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-5"},{default:(0,a.w5)((()=>[h])),_:1})])])):(0,a.kq)("",!0),(0,a._)("div",p,[0!==t.favorite.length&&t.windowWidth>768?((0,a.wg)(),(0,a.iD)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.favorite,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col-md-6 col-lg-4 col-10",key:e.id},[(0,a._)("div",{class:"card rounded-3 scale",onClick:s=>t.goProduct(e.id)},[(0,a._)("div",v,[(0,a._)("button",m,[(0,a.Wm)(E,{icon:"fa-solid fa-magnifying-glass"}),w]),(0,a._)("img",{class:"rounded-3 img-fit",src:e.imageUrl,alt:"商品照片"},null,8,y)]),(0,a._)("div",b,[(0,a._)("span",k,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),(0,a._)("span",_," （"+(0,i.zw)(e.category)+"） ",1)]),(0,a._)("span",x,[(0,a.Uk)(" NT $"+(0,i.zw)(e.price)+" ",1),(0,a._)("span",I," $"+(0,i.zw)(e.origin_price),1)]),(0,a._)("div",C,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary text-dark fw-bold fs-6 px-3",onClick:(0,o.iM)((s=>t.removeFavorite(e.id)),["stop"])},"   刪除   ",8,L),(0,a._)("button",{type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-6 px-3",disabled:t.cartLoadingItem===e.id,onClick:(0,o.iM)((s=>t.addCart(e.id)),["stop"])},[t.cartLoadingItem===e.id?((0,a.wg)(),(0,a.iD)("div",Z,F)):(0,a.kq)("",!0),M],8,S)])])],8,f)])))),128))])):(0,a.kq)("",!0),0!==t.favorite.length&&t.windowWidth<=768?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("table",B,[P,(0,a._)("tbody",D,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.favorite,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",N,[(0,a._)("img",{class:"rounded-3 img-fit",src:e.imageUrl,alt:"商品照片",onClick:s=>t.goProduct(e.id),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"詳細資訊"},null,8,q)]),(0,a._)("td",z,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),O,(0,a._)("span",R," （"+(0,i.zw)(e.category)+"） ",1)]),(0,a._)("td",U," NT$ "+(0,i.zw)(e.price),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn text-danger fs-4",type:"button",onClick:s=>t.addCart(e.id)},[(0,a.Wm)(H,{icon:"fa-solid fa-cart-plus"})],8,G)]),(0,a._)("td",null,[(0,a._)("button",{class:"btn text-primary fs-4",type:"button",onClick:s=>t.removeFavorite(e.id)},[(0,a.Wm)(E,{icon:"fa-solid fa-trash-can"})],8,T)])])))),128))])])])):(0,a.kq)("",!0)])])],64)}var j=s(4301),E=s(4238),H=s(4677),J=s(6294),A=s(9498),Y=s(8778),K=s(6197),V={data(){return{window:0}},computed:{...(0,j.rn)(A.Z,["favorite","favoriteIds"]),...(0,j.rn)(E.Z,["products"]),...(0,j.rn)(J.Z,["cartLoadingItem"]),...(0,j.rn)(K.Z,["windowWidth"])},methods:{...(0,j.nv)(A.Z,["getFavorite","getFavoriteIds","removeFavorite"]),...(0,j.nv)(E.Z,["getProducts"]),...(0,j.nv)(H.Z,["getCart","addCart"]),...(0,j.nv)(Y.Z,["goProduct"]),...(0,j.nv)(K.Z,["getWindowWidth"])},mounted(){this.getWindowWidth()}},X=s(89);const tt=(0,X.Z)(V,[["render",Q],["__scopeId","data-v-69ef8f1e"]]);var et=tt}}]);
//# sourceMappingURL=579.1b319a93.js.map