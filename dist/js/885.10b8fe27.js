"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[885],{4677:function(t,e,s){var a=s(6265),o=s.n(a),i=s(1120),r=s(4301),c=s(6294);const d=(0,c.Z)();e["Z"]=(0,r.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";d.isLoading=!0,o().get(t).then((t=>{this.cartNum=t.data.data.carts.length,this.cart=t.data.data,d.isLoading=!1})).catch((t=>console.error(t)))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t.id}`;d.isLoading=!0,d.cartLoadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};o().put(e,{data:s}).then((t=>{d.cartLoadingItem="",this.getCart()})).catch((t=>console.error(t)))},removeCartItem(t){d.cartLoadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;d.isLoading=!0,o()["delete"](e).then((t=>{console.log(t),d.PushManager(t,"移除購物車品項"),d.cartLoadingItem="",this.getCart(),d.isLoading=!1})).catch((t=>console.error(t)))},addCart(t,e=1){const s="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";d.cartLoadingItem=t;const a={product_id:t,qty:e};o().post(s,{data:a}).then((t=>{d.cartLoadingItem="",this.getCart(),d.PushManager(t,"加入購物車")})).catch((t=>console.error(t)))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",e=this.form;o().post(t,{data:e}).then((t=>{i.Z.push(`/checkoutPay/${t.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((t=>console.error(t)))}}})},9498:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("favoriteStore",{state:()=>({favorite:[],favoriteIds:[],favoriteNum:0,products:[]}),actions:{productsBus(t){this.products=t,this.getFavorite()},getFavoriteIds(){this.favoriteIds=JSON.parse(localStorage.getItem("favoriteIds"))||[]},getFavorite(){this.getFavoriteIds(),this.favorite=[],this.products.forEach((t=>{this.favoriteIds.indexOf(t.id)>-1&&this.favorite.push(t)})),this.favoriteNum=this.favorite.length},toggleFavorite(t){const e=t,s=this.favoriteIds.some((t=>t===e));if(s){const t=this.favoriteIds.find((t=>t===e));this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds))}else this.favoriteIds.push(t),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds));this.getFavorite()},removeFavorite(t){this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds)),this.getFavorite()}},getters:{favState(){return t=>this.favoriteIds.indexOf(t)>-1?"bi bi-heart-fill":"bi bi-heart"}}})},8778:function(t,e,s){var a=s(1120),o=s(4301),i=s(4677);const r=(0,i.Z)();e["Z"]=(0,o.Q_)("goStore",{actions:{goCart(){a.Z.push("/cart"),r.cartBoxState=!1},goProducts(){a.Z.push("/products"),r.cartBoxState=!1},goProduct(t){a.Z.push(`/product/${t}`)},goCheckout(){a.Z.push("/checkout")}}})},4238:function(t,e,s){var a=s(6265),o=s.n(a),i=s(4301),r=s(6294),c=s(9498);const d=(0,r.Z)(),n=(0,c.Z)();e["Z"]=(0,i.Q_)("productStore",{state:()=>({products:[],product:{},productsHot:[],productsGame:[],temp:{},category:"all"}),actions:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/products/all";d.isLoading=!0,o().get(t).then((t=>{this.products=t.data.products,this.productsHot=this.products.filter(((t,e)=>e>14)),n.productsBus(this.products),this.productsGame=[],this.productsGame.push(t.data.products[11]),this.productsGame.push(t.data.products[10]),this.productsGame.push(t.data.products[8]),this.productsGame.push(t.data.products[5]),this.temp=this.productsGame[0],d.isLoading=!1})).catch((t=>console.error(t)))},getProduct(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/product/${t}`;d.isLoading=!0,o().get(e).then((t=>{d.isLoading=!1,t.data.success&&(this.product=t.data.product,this.product.qty=1)}))},setCategory(t){this.category=t}},getters:{filterProducts(){let t;switch(this.category){case"all":t=this.products.filter((t=>t));break;case"S":t=this.products.filter((t=>"S"===t.category));break;case"A":t=this.products.filter((t=>"A"===t.category));break;case"B":t=this.products.filter((t=>"B"===t.category));break;case"C":t=this.products.filter((t=>"C"===t.category));break;case"馬鞍":t=this.products.filter((t=>"馬鞍"===t.description));break;case"馬蹄鐵":t=this.products.filter((t=>"馬蹄鐵"===t.description));break;case"馬飼料":t=this.products.filter((t=>"馬飼料"===t.description));break}return t}}})},6294:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{PushManager(t,e="更新"){if("抽獎"==t||t.data.success){const t={style:"success",title:`${e}成功`};this.messages.push(t)}else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message,a={style:"danger",title:`${e}失敗`,content:s.join("、")};this.messages.push(a)}}}})},6885:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var a=s(3396),o=s(9242),i=s(7139);const r=t=>((0,a.dD)("data-v-5ddbbe71"),t=t(),(0,a.Cn)(),t),c=(0,a.uE)('<div class="favBanner" data-v-5ddbbe71><div class="bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center" data-v-5ddbbe71><h1 class="w-100 d-flex align-items-center justify-content-center" data-v-5ddbbe71><span class="me-2 fs-1 fw-bolder text-white" data-v-5ddbbe71>我的最愛</span><span class="fs-5 text-primary align-self-end" data-v-5ddbbe71>/ My Favorite</span></h1></div></div>',1),d={class:"pb-5"},n={key:0,class:"container-fluid pt-5"},l={class:"d-flex flex-column justify-content-center align-items-center"},u=r((()=>(0,a._)("h1",{class:"fs-2 text-center fw-bold mb-5"},"目前沒有收藏任何商品",-1))),h=(0,a.Uk)("回產品列表"),p={class:"container pt-5"},g={key:0,class:"row g-4 justify-content-center"},f={class:"card rounded-3"},v={class:"card-img overflow-hidden position-relative scale"},m=["onClick"],b=["src"],k={class:"card-body d-flex flex-column justify-content-center text-center fw-bold"},y={class:"fs-4"},I={class:"fs-6 text-muted"},x={class:"fs-5"},w={class:"text-muted text-decoration-line-through fs-6 ms-1"},_={class:"px-3 py-2 d-flex justify-content-between"},C=["onClick"],L=["disabled","onClick"],Z={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},S=r((()=>(0,a._)("span",{class:"visually-hidden"},"Loading...",-1))),F=[S],P=(0,a.Uk)(" 加到購物車 ");function B(t,e,s,r,S,B){const N=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[c,(0,a._)("div",d,[0===t.favorite.length?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",l,[u,(0,a.Wm)(N,{to:"products",type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-5"},{default:(0,a.w5)((()=>[h])),_:1})])])):(0,a.kq)("",!0),(0,a._)("div",p,[0!==t.favorite.length?((0,a.wg)(),(0,a.iD)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.favorite,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col-md-6 col-lg-4 col-12",key:e.id},[(0,a._)("div",f,[(0,a._)("div",v,[(0,a._)("button",{class:"btn bg-dark fs-4 position-absolute text-white w-100 h-100 bg-opacity-75",type:"button",onClick:(0,o.iM)((s=>t.goProduct(e.id)),["prevent"])}," 詳細資訊 ",8,m),(0,a._)("img",{class:"rounded-3 img-fit",src:e.imageUrl,alt:"商品照片"},null,8,b)]),(0,a._)("div",k,[(0,a._)("span",y,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),(0,a._)("span",I,"（"+(0,i.zw)(e.category)+"）",1)]),(0,a._)("span",x,[(0,a.Uk)(" NT $"+(0,i.zw)(e.price)+" ",1),(0,a._)("span",w,"$"+(0,i.zw)(e.origin_price),1)]),(0,a._)("div",_,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary fw-bold fs-6 px-3",onClick:(0,o.iM)((s=>t.removeFavorite(e.id)),["stop"])}," 移除收藏 ",8,C),(0,a._)("button",{type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-6 px-3",disabled:t.cartLoadingItem===e.id,onClick:(0,o.iM)((s=>t.addCart(e.id)),["stop"])},[t.cartLoadingItem===e.id?((0,a.wg)(),(0,a.iD)("div",Z,F)):(0,a.kq)("",!0),P],8,L)])])])])))),128))])):(0,a.kq)("",!0)])])],64)}var N=s(4301),$=s(4238),O=s(4677),q=s(6294),D=s(9498),G=s(8778),M={computed:{...(0,N.rn)(D.Z,["favorite","favoriteIds"]),...(0,N.rn)($.Z,["products"]),...(0,N.rn)(q.Z,["cartLoadingItem"])},methods:{...(0,N.nv)(D.Z,["getFavorite","getFavoriteIds","removeFavorite"]),...(0,N.nv)($.Z,["getProducts"]),...(0,N.nv)(O.Z,["getCart","addCart"]),...(0,N.nv)(G.Z,["goProduct"])}},j=s(89);const Q=(0,j.Z)(M,[["render",B],["__scopeId","data-v-5ddbbe71"]]);var U=Q}}]);
//# sourceMappingURL=885.10b8fe27.js.map