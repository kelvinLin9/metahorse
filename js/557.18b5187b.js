"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[557],{4371:function(e,s,t){var o=t(4301),l=t(6294);const r=(0,l.Z)();s["Z"]=(0,o.Q_)("copyStore",{actions:{copyCode(e){navigator.clipboard.writeText(e).then((()=>{r.pushManager(!0,"複製","請到購物車頁面使用")})).catch((()=>{r.isLoading=!1,r.pushManager(!1,"複製","發生錯誤，請重新操作")}))}}})},9049:function(e,s,t){t.d(s,{Z:function(){return k}});var o=t(3396),l=t(7139);const r={class:"container py-4 checkout-bar w-75 no-print"},a={class:"row fs-5 fw-bold justify-content-center"},n=(0,o.Uk)(" 購物"),d=(0,o._)("br",{class:"d-block d-sm-none"},null,-1),i=(0,o.Uk)("車 "),c=(0,o.Uk)(" 填寫"),u=(0,o._)("br",{class:"d-block d-sm-none"},null,-1),h=(0,o.Uk)("訂單 "),p=(0,o.Uk)(" 確認"),_=(0,o._)("br",{class:"d-block d-sm-none"},null,-1),f=(0,o.Uk)("付款 ");function m(e,s){const t=(0,o.up)("FontAwesomeIcon");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",a,[(0,o._)("div",{class:(0,l.C_)(["col-3 col-lg-2 d-flex flex-column px-2 py-3 align-items-center rounded-pill",{"bg-primary":"cart"===e.$route.name}])},[(0,o.Wm)(t,{icon:"fa-solid fa-1"}),n,d,i],2),(0,o._)("div",{class:(0,l.C_)(["col-3 col-lg-2 d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkout"===e.$route.name}])},[(0,o.Wm)(t,{icon:"fa-solid fa-2"}),c,u,h],2),(0,o._)("div",{class:(0,l.C_)(["col-3 col-lg-2 d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkoutPay"===e.$route.name}])},[(0,o.Wm)(t,{icon:"fa-solid fa-3"}),p,_,f],2)])])}var y=t(89);const w={},b=(0,y.Z)(w,[["render",m]]);var k=b},1557:function(e,s,t){t.r(s),t.d(s,{default:function(){return ce}});var o=t(3396),l=t(9242),r=t(7139);const a={class:"container"},n={class:"py-5 row justify-content-center"},d=(0,o._)("h1",{class:"fs-2 text-center fw-bold"},"購物明細",-1),i={class:"table align-middle"},c=(0,o._)("thead",{class:"table-primary"},[(0,o._)("th",null,"品名"),(0,o._)("th",null,"數量"),(0,o._)("th",{class:"text-end"},"小計")],-1),u={class:"text-end"},h=(0,o._)("small",{class:"fs-7"}," NT$ ",-1),p={colspan:"3",class:"text-end fs-4"},_=(0,o.Uk)(" 總計 : "),f=(0,o._)("small",{class:"fs-6"}," NT$ ",-1),m={class:"card"},y=(0,o._)("h5",{class:"card-header"},"訂單編號 :",-1),w={class:"card-body"},b={class:"card-text",id:"orderId"},k={class:"table"},g=(0,o._)("th",{width:"100",class:"fw-bold"},"訂購日期 :",-1),v=(0,o._)("th",{width:"100"},"Email",-1),x=(0,o._)("th",null,"姓名",-1),$=(0,o._)("th",null,"收件人電話",-1),C=(0,o._)("th",null,"收件人地址",-1),M=(0,o._)("th",null,"付款狀態",-1),U={key:0},O={key:1,class:"text-success"},z={class:"px-3 py-2 d-flex justify-content-between"};function D(e,s,t,D,I,L){const Z=(0,o.up)("UserCheckoutBar"),W=(0,o.up)("GameModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Z),(0,o._)("div",a,[(0,o._)("div",n,[d,(0,o._)("form",{class:"col-12 col-md-9 col-lg-6 table-responsive",onSubmit:s[3]||(s[3]=(0,l.iM)(((...s)=>e.payOrder&&e.payOrder(...s)),["prevent"]))},[(0,o._)("table",i,[c,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.order.products,(s=>((0,o.wg)(),(0,o.iD)("tr",{key:s.id},[(0,o._)("td",null,(0,r.zw)(s.product.title),1),(0,o._)("td",null,(0,r.zw)(s.qty),1),(0,o._)("td",u,[h,(0,o.Uk)(" "+(0,r.zw)(e.$filters.currency(s.final_total))+" 元 ",1)])])))),128))]),(0,o._)("tfoot",null,[(0,o._)("tr",null,[(0,o._)("td",p,[_,f,(0,o.Uk)(" "+(0,r.zw)(e.$filters.currency(e.order.total))+" 元 ",1)])])])]),(0,o._)("div",m,[y,(0,o._)("div",w,[(0,o._)("p",b,(0,r.zw)(e.order.id),1),(0,o._)("a",{href:"#",class:"btn btn-primary btn-sm",onClick:s[0]||(s[0]=(0,l.iM)((s=>e.copyCode(e.order.id)),["prevent"]))}," 複製訂單編號 ")])]),(0,o._)("table",k,[(0,o._)("tbody",null,[(0,o._)("tr",null,[g,(0,o._)("td",null,(0,r.zw)(e.$filters.date(e.order.create_at)),1)]),(0,o._)("tr",null,[v,(0,o._)("td",null,(0,r.zw)(e.order.user.email),1)]),(0,o._)("tr",null,[x,(0,o._)("td",null,(0,r.zw)(e.order.user.name),1)]),(0,o._)("tr",null,[$,(0,o._)("td",null,(0,r.zw)(e.order.user.tel),1)]),(0,o._)("tr",null,[C,(0,o._)("td",null,(0,r.zw)(e.order.user.address),1)]),(0,o._)("tr",null,[M,(0,o._)("td",null,[e.order.is_paid?((0,o.wg)(),(0,o.iD)("span",O,"付款完成")):((0,o.wg)(),(0,o.iD)("span",U,"尚未付款"))])])])]),(0,o._)("div",z,[(0,o._)("button",{type:"button",class:"btn btn-secondary btn-hover rounded-0 fw-bold",onClick:s[1]||(s[1]=(...e)=>L.printWindow&&L.printWindow(...e))}," 列印此頁 "),(0,o._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold",onClick:s[2]||(s[2]=e=>L.showAlert())}," 確認付款 ")])],32)])]),(0,o.Wm)(W,{ref:"GameModal"},null,512)],64)}var I=t(9049);const L=e=>((0,o.dD)("data-v-726bdade"),e=e(),(0,o.Cn)(),e),Z={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"static",ref:"modal"},W={class:"modal-dialog modal-dialog-centered modal-fullscreen"},A={class:"modal-content"},P={class:"modal-header"},T={class:"modal-title",id:"exampleModalLabel"},B=(0,o.Uk)(" 點選賽馬開始遊戲 / "),R={key:0},H=(0,o.Uk)(" 您選擇的是 "),G={class:"fs-1"},S=(0,o.Uk)(" 號 "),j={class:"modal-body"},Y={class:"container-fluid"},q=["onClickOnce"],E={class:"fs-6"},F=L((()=>(0,o._)("span",{class:"start"},null,-1))),K=L((()=>(0,o._)("span",{class:"end"},null,-1)));function N(e,s,t,l,a,n){const d=(0,o.up)("FontAwesomeIcon");return(0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",W,[(0,o._)("div",A,[(0,o._)("div",P,[(0,o._)("h5",T,[B,a.horse.id?((0,o.wg)(),(0,o.iD)("span",R,[H,(0,o._)("span",G,(0,r.zw)(a.horse.id),1),S])):(0,o.kq)("",!0)])]),(0,o._)("div",j,[(0,o._)("div",Y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.horses,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,onClickOnce:s=>n.selectHorse(e),class:(0,r.C_)(["horse d-flex",[e.color,e.speed,`top-${e.id}`,{"animation-start":a.isPlay},{"selected-horse":a.horse.id===e.id}]]),disabled:!0},[(0,o._)("div",E,(0,r.zw)(e.id),1),(0,o._)("div",null,[(0,o.Wm)(d,{icon:"fa-solid fa-horse"})])],42,q)))),128)),F,K])])])])],512)}var Q=t(1339),J={data(){return{modal:{},horses:[{color:"text-primary",speed:"linear",id:1},{color:"text-secondary",speed:"ease",id:2},{color:"text-success",speed:"ease-in",id:3},{color:"text-danger",speed:"ease-out",id:4},{color:"",speed:"super",id:5}],horse:{},rank:["super","ease","ease-out","linear","ease-in"],yourRank:0,gift:["S級賽馬","A級賽馬","B級賽馬","C級賽馬","馬鞍"],isPlay:!1,horsesPosition:0,window:0}},mixins:[Q.Z],methods:{shuffleArray(e){e.sort((()=>Math.random()-.5))},selectHorse(e){this.isPlay||(this.horse={...e},this.play())},getRank(){this.isPlay=!1,this.$swal.fire({title:`恭喜獲得第${this.yourRank}名 <br>${this.gift[this.yourRank-1]} x 1`,text:"獎品將會在和商品一併寄出",icon:"success",allowOutsideClick:!1,confirmButtonText:"繼續購物"}).then((()=>{this.hideModal(),this.$router.push("/products")}))},play(){this.isPlay=!0,this.yourRank=this.rank.indexOf(this.horse.speed)+1,setTimeout(this.getRank,5e3)}},created(){const e=[...this.rank];this.shuffleArray(e),this.horses.forEach(((s,t)=>{s.speed=e[t]}))}},V=t(89);const X=(0,V.Z)(J,[["render",N],["__scopeId","data-v-726bdade"]]);var ee=X,se=t(4301),te=t(4371),oe=t(6265),le=t.n(oe),re=t(6294);const ae=(0,re.Z)();var ne=(0,se.Q_)("orderStore",{state:()=>({orderId:"",order:{user:{}}}),actions:{getOrder(){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/order/${this.orderId}`;ae.isLoading=!0,le().get(e).then((e=>{e.data.success&&(ae.isLoading=!1,this.order=e.data.order)})).catch((()=>{ae.isLoading=!1,ae.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},payOrder(){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/pay/${this.orderId}`;ae.isLoading=!0,le().post(e).then((e=>{e.data.success&&(ae.isLoading=!1,this.getOrder())})).catch((()=>{ae.isLoading=!1,ae.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))}}}),de={components:{UserCheckoutBar:I.Z,GameModal:ee},computed:{...(0,se.Ah)(ne,["orderId"]),...(0,se.rn)(ne,["order"])},methods:{...(0,se.nv)(te.Z,["copyCode"]),...(0,se.nv)(ne,["getOrder","payOrder"]),showAlert(){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(e).then((e=>{this.isLoading=!1,e.data.success&&(this.order.total>3e4?this.$swal.fire({title:"感謝您的支持",text:"產品將會在3個工作天內寄出",icon:"success",allowOutsideClick:!1,confirmButtonText:"開始滿額小遊戲"}).then((()=>{this.$refs.GameModal.showModal()})):this.$swal.fire({title:"感謝您的支持",text:"產品將會在3個工作天內寄出",icon:"success",confirmButtonText:"繼續購物"}).then((()=>{this.$router.push("/products")})))}))},printWindow(){window.print()}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}};const ie=(0,V.Z)(de,[["render",D]]);var ce=ie}}]);
//# sourceMappingURL=557.18b5187b.js.map