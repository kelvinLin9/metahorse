"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[735],{4677:function(t,a,o){var e=o(6265),s=o.n(e),c=o(1120),n=o(4301),l=o(6294);const i=(0,l.Z)();a["Z"]=(0,n.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";i.isLoading=!0,s().get(t).then((t=>{this.cartNum=t.data.data.carts.length,this.cart=t.data.data,i.isLoading=!1})).catch((()=>{i.isLoading=!1,i.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},updateCart(t){const a=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t.id}`;i.isLoading=!0,i.cartLoadingItem=t.id;const o={product_id:t.product_id,qty:t.qty};s().put(a,{data:o}).then((()=>{i.cartLoadingItem="",this.getCart()})).catch((()=>{i.isLoading=!1,i.pushManager(!1,"更新","發生錯誤，請重新操作")}))},removeCartItem(t){i.cartLoadingItem=t;const a=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;i.isLoading=!0,s()["delete"](a).then((t=>{i.pushManager(t,"刪除","此項目已移除購物車"),i.cartLoadingItem="",this.getCart(),i.isLoading=!1})).catch((()=>{i.isLoading=!1,i.pushManager(!1,"刪除","發生錯誤，請重新操作")}))},addCart(t,a=1){const o="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";i.cartLoadingItem=t;const e={product_id:t,qty:a};s().post(o,{data:e}).then((t=>{i.cartLoadingItem="",this.getCart(),i.pushManager(t,"更新","已加入購物車")})).catch((()=>{i.isLoading=!1,i.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",a=this.form;s().post(t,{data:a}).then((t=>{c.Z.push(`/checkoutPay/${t.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((()=>{i.isLoading=!1,i.pushManager(!1,"傳送","發生錯誤，請重新填寫資料並送出")}))}}})},2974:function(t,a,o){var e=o(6265),s=o.n(e),c=o(4301),n=o(6294),l=o(4677);const i=(0,n.Z)(),r=(0,l.Z)();a["Z"]=(0,c.Q_)("couponStore",{state:()=>({coupon_code:"",coupons:[{id:1,img:"https://storage.googleapis.com/vue-course-api.appspot.com/kelvinlin9/1666490147962.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=fUWCF92T7UOQmxyyD5gz2nw%2Bjr%2BHgwls%2BA%2FaAgyZRvtqzsfO3z5I%2BwWGezKKqZFk6ABtySVop1u4cly6WGzGFYxes1eAP%2B7IW%2FUzml%2FeA3LiwzK1ZNfmTUVIs0lVE1s2SKJwjYR3hwaHTd3b5y5EPUYlglXpyOwwMcVNUnjSkNz0LwpAc0HyO9D5dCKV8p54sm3D5oOex5TpqiZOkvMH2X1%2B56ZxKrCJ8N2Z3En08bKMlLgurqSHCt05WVf%2Bws8KVyHD8OhILwH%2FDEBZqHU11FcGg2BRFaMJkpoAFtI1%2FLLvCL1PTBTFVWF85dcXFXXWiV3UdCUEGuE4CU4PeRPWzQ%3D%3D",discount:"5折",code:"diamond"},{id:2,img:"https://storage.googleapis.com/vue-course-api.appspot.com/kelvinlin9/1666490106008.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=gXFy4XDqe5X0ZSVTA2mql1Tla2b7rAZ9BRGAccBurkQu7I21PPNlft7KNoYZlzVXJG9jJMKtpce7x1SU%2FvF%2BuyrNCoagM8sCB7TDUr6flq4a4ogf54dv7PS%2FzkcZKw198l2WDa7El4VFCpp9RwBiDafo9bwwWv%2BZSeRShd4nOPEd2xU11sM%2FqbGt2BK5V3Es5%2FxH1mh%2Bw2Vaq7%2FEABrGb3VjytLlboUoercBRvaI4stnQIGv8d6Gog2w87uqTGUDsgNj5f0zy03W5g9Zle3PFWwdhYP7C6wC1wgYhbPXIYLGAEAr0XOQkP34bff%2B%2FwZBpTp7j8aNT2Q8OCRDcSZcyg%3D%3D",discount:"7折",code:"gold"},{id:3,img:"https://storage.googleapis.com/vue-course-api.appspot.com/kelvinlin9/1666490131972.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=CL0yLgoV3%2BnVZewXtdQUGNOVOVpjc5UF1bSnI%2FcoZEdWk9zgUoSPOF3KSNkKz5Y8k6aMHVg6l3RidhTwITzToc%2F86OIEcTTWRdbPMMNA9LKHkHK1MLb7OFoTYI9EBxx5RoVq0r4TXGPnMQ%2BMcjZLQSRMbWnpA13PcFQUkYxsmQeDtpLrJXu9Z%2FyouHQr7NCvhGyO2Tw7qzLLBjQAQEOBXjvl9ZZJHoSNjv3vmTc%2FIy8hIv%2FyzFxHhRqA5D2Y38yhtvVg31TbqisX1ezyUOnAzARDj%2FCDmAgDPSVkIGMNgtutvPQHDY3WJ6ooC2yINJ0fuk%2FHTSEUg7i%2BMcXlbbhyaQ%3D%3D",discount:"8折",code:"silver"}],coupon:{},draw:!1}),actions:{addCouponCode(t){this.coupon_code=t;const a="https://vue3-course-api.hexschool.io/api/kelvinlin9/coupon",o={code:`${t}`};i.isLoading=!0,s().post(a,{data:o}).then((t=>{!0===t.data.success?(i.pushManager(t,"加入優惠券",t.data.message),r.getCart(),i.isLoading=!1,this.coupon_code=""):(i.pushManager(!1,"加入優惠券",t.data.message),i.isLoading=!1,this.coupon_code="")})).catch((()=>{i.isLoading=!1,i.pushManager(!1,"更新","發生錯誤，請重新操作")}))},luckyDraw(t,a){const o=Math.floor(Math.random()*(a-t+1))+t;this.coupon=this.coupons[o],this.draw=!0}}})},8778:function(t,a,o){var e=o(1120),s=o(4301),c=o(4677);const n=(0,c.Z)();a["Z"]=(0,s.Q_)("goStore",{actions:{goCart(){e.Z.push("/cart"),n.cartBoxState=!1},goProducts(){e.Z.push("/products"),n.cartBoxState=!1},goProduct(t){e.Z.push(`/product/${t}`)},goCheckout(){e.Z.push("/checkout")}}})},6294:function(t,a,o){var e=o(4301);a["Z"]=(0,e.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{pushManager(t=!0,a="更新",o=""){if(t){const t={style:"success",title:`${a}成功`,content:`${o}`};this.messages.push(t)}else{const t={style:"danger",title:`${a}失敗`,content:`${o}`};this.messages.push(t)}}}})},9049:function(t,a,o){o.d(a,{Z:function(){return _}});var e=o(3396),s=o(7139);const c={class:"container py-4 checkout-bar w-75 no-print"},n={class:"row fs-5 fw-bold justify-content-center"},l=(0,e.Uk)(" 購物"),i=(0,e._)("br",{class:"d-block d-sm-none"},null,-1),r=(0,e.Uk)("車 "),d=(0,e.Uk)(" 填寫"),u=(0,e._)("br",{class:"d-block d-sm-none"},null,-1),p=(0,e.Uk)("訂單 "),g=(0,e.Uk)(" 確認"),h=(0,e._)("br",{class:"d-block d-sm-none"},null,-1),m=(0,e.Uk)("付款 ");function f(t,a){const o=(0,e.up)("FontAwesomeIcon");return(0,e.wg)(),(0,e.iD)("div",c,[(0,e._)("div",n,[(0,e._)("div",{class:(0,s.C_)(["col-3 col-lg-2 d-flex flex-column px-2 py-3 align-items-center rounded-pill",{"bg-primary":"cart"===t.$route.name}])},[(0,e.Wm)(o,{icon:"fa-solid fa-1"}),l,i,r],2),(0,e._)("div",{class:(0,s.C_)(["col-3 col-lg-2 d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkout"===t.$route.name}])},[(0,e.Wm)(o,{icon:"fa-solid fa-2"}),d,u,p],2),(0,e._)("div",{class:(0,s.C_)(["col-3 col-lg-2 d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkoutPay"===t.$route.name}])},[(0,e.Wm)(o,{icon:"fa-solid fa-3"}),g,h,m],2)])])}var k=o(89);const b={},y=(0,k.Z)(b,[["render",f]]);var _=y},9735:function(t,a,o){o.r(a),o.d(a,{default:function(){return pt}});var e=o(3396),s=o(7139),c=o(9242);const n=t=>((0,e.dD)("data-v-5c24ac79"),t=t(),(0,e.Cn)(),t),l={key:0,class:"container py-3"},i={class:"text-center pt-4"},r=n((()=>(0,e._)("h3",{class:"fw-bold"},"購物車還沒有任何商品，趕快挑選產品加入購物車 !",-1))),d={key:1,class:"container py-3"},u=n((()=>(0,e._)("div",{class:"d-flex justify-content-center"},[(0,e._)("h1",{class:"fs-2 text-center fw-bold"},"購物清單")],-1))),p={class:"row mt-2 justify-content-center"},g={class:"col-lg-9 col-xl-6"},h={class:"table align-middle table-hover"},m=n((()=>(0,e._)("thead",{class:"table-primary"},[(0,e._)("tr",null,[(0,e._)("th",null,"刪除"),(0,e._)("th",{class:"d-none d-sm-block"},"圖片"),(0,e._)("th",null,"品名"),(0,e._)("th",{class:"d-none d-md-block"},"單價"),(0,e._)("th",{style:{width:"70px"}},"數量"),(0,e._)("th",null,"總價")])],-1))),f=["disabled","onClick"],k={class:"d-none d-sm-table-cell"},b=["src"],y={class:"fs-title"},_=n((()=>(0,e._)("br",null,null,-1))),v={class:"d-none d-md-table-cell"},w=n((()=>(0,e._)("small",{class:"fs-7"}," NT$ ",-1))),C={class:"input-group input-group-sm"},x=["disabled","onChange","onUpdate:modelValue","onInput"],U={class:"fs-6"},Z={key:0},L=n((()=>(0,e._)("small",{class:"fs-7"}," NT$ ",-1))),D={key:1},I=n((()=>(0,e._)("small",{class:"fs-7"}," NT$ ",-1))),F={key:0},B={colspan:"7",class:"text-end fs-4"},z=(0,e.Uk)(" 總計： "),q=n((()=>(0,e._)("small",{class:"fs-6"}," NT$ ",-1))),T={key:1},M={colspan:"7",class:"text-end fs-5"},P={key:2},S={colspan:"7",class:"text-end text-secondary fw-bold fs-3"},A=(0,e.Uk)(" 折扣價： "),V=n((()=>(0,e._)("small",{class:"fs-6"}," NT$ ",-1))),N={key:0,class:"input-group mb-3"},$={key:1,class:"text-end"},W=(0,e.Uk)(" 還差 "),G={class:"fs-3"},Q=(0,e.Uk)(" 元即可參加抽獎 "),E={key:2,class:"text-end"},H=(0,e.Uk)(" 還差 "),O={class:"fs-3"},j=(0,e.Uk)(" 元即可參加抽獎 "),K={key:3,class:"d-flex justify-content-between mt-3"},X=n((()=>(0,e._)("i",{class:"bi bi-caret-left-fill"},null,-1))),R=(0,e.Uk)("商品列表 "),Y=[X,R],J=(0,e.Uk)(" 填寫資料"),tt=n((()=>(0,e._)("i",{class:"bi bi-caret-right-fill"},null,-1))),at=[J,tt];function ot(t,a,o,n,X,R){const J=(0,e.up)("UserCheckoutBar"),tt=(0,e.up)("FontAwesomeIcon");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(J),0===t.cart.total?((0,e.wg)(),(0,e.iD)("div",l,[(0,e._)("div",i,[r,(0,e._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg mt-5",onClick:a[0]||(a[0]=(...a)=>t.goProducts&&t.goProducts(...a))}," 商品列表 ")])])):(0,e.kq)("",!0),0!==t.cart.total?((0,e.wg)(),(0,e.iD)("div",d,[u,(0,e._)("div",p,[(0,e._)("div",g,[(0,e._)("table",h,[m,(0,e._)("tbody",null,[t.cart.carts?((0,e.wg)(!0),(0,e.iD)(e.HY,{key:0},(0,e.Ko)(t.cart.carts,(a=>((0,e.wg)(),(0,e.iD)("tr",{key:a.id},[(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn text-primary fs-3",disabled:t.cartLoadingItem===a.id,onClick:o=>t.removeCartItem(a.id)},[(0,e.Wm)(tt,{icon:"fa-solid fa-trash-can"})],8,f)]),(0,e._)("td",k,[(0,e._)("img",{src:a.product.imageUrl,alt:"商品照片",width:"80"},null,8,b)]),(0,e._)("td",y,[(0,e.Uk)((0,s.zw)(a.product.title),1),_]),(0,e._)("td",v,[w,(0,e.Uk)(" "+(0,s.zw)(a.product.price),1)]),(0,e._)("td",null,[(0,e._)("div",C,[(0,e.wy)((0,e._)("input",{type:"number",class:"form-control fs-7",min:"1",disabled:a.id===t.cartLoadingItem,onChange:o=>t.updateCart(a),"onUpdate:modelValue":t=>a.qty=t,onInput:t=>a.qty=Number(t.target.value.replace(/^(0+)|[^\d]+/g,""))||1},null,40,x),[[c.nr,a.qty,void 0,{number:!0}]])])]),(0,e._)("td",U,[a.final_total===a.total?((0,e.wg)(),(0,e.iD)("div",Z,[L,(0,e.Uk)(" "+(0,s.zw)(t.$filters.currency(a.final_total)),1)])):(0,e.kq)("",!0),a.final_total!==a.total?((0,e.wg)(),(0,e.iD)("div",D,[I,(0,e.Uk)(" "+(0,s.zw)(t.$filters.currency(a.final_total)),1)])):(0,e.kq)("",!0)])])))),128)):(0,e.kq)("",!0)]),(0,e._)("tfoot",null,[t.cart.final_total===t.cart.total?((0,e.wg)(),(0,e.iD)("tr",F,[(0,e._)("td",B,[z,q,(0,e.Uk)(" "+(0,s.zw)(t.$filters.currency(t.cart.total)),1)])])):(0,e.kq)("",!0),t.cart.final_total!==t.cart.total?((0,e.wg)(),(0,e.iD)("tr",T,[(0,e._)("td",M,[(0,e._)("del",null," 總計：NT$ "+(0,s.zw)(t.$filters.currency(t.cart.total)),1)])])):(0,e.kq)("",!0),t.cart.final_total!==t.cart.total?((0,e.wg)(),(0,e.iD)("tr",P,[(0,e._)("td",S,[A,V,(0,e.Uk)(" "+(0,s.zw)(t.$filters.currency(t.cart.final_total)),1)])])):(0,e.kq)("",!0)])]),0!==t.cart.total?((0,e.wg)(),(0,e.iD)("div",N,[(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"請輸入優惠碼","aria-describedby":"button-addon","onUpdate:modelValue":a[1]||(a[1]=a=>t.coupon_code=a)},null,512),[[c.nr,t.coupon_code]]),(0,e._)("button",{class:"btn btn-outline-secondary fw-bold btn-lg",type:"button",id:"button-addon",onClick:a[2]||(a[2]=a=>t.addCouponCode(t.coupon_code))}," 套用優惠碼 ")])):(0,e.kq)("",!0),t.cart.total<3e4&&t.cart.final_total===t.cart.total?((0,e.wg)(),(0,e.iD)("div",$,[W,(0,e._)("span",G,(0,s.zw)(""+(3e4-t.cart.total)),1),Q])):(0,e.kq)("",!0),t.cart.total<3e4&&t.cart.final_total!==t.cart.total?((0,e.wg)(),(0,e.iD)("div",E,[H,(0,e._)("span",O,(0,s.zw)(""+(3e4-t.cart.final_total)),1),j])):(0,e.kq)("",!0),0!==t.cart.total?((0,e.wg)(),(0,e.iD)("div",K,[(0,e._)("button",{type:"button",class:"btn btn-outline-primary btn-hover rounded-0 fw-bold btn-lg text-dark",onClick:a[3]||(a[3]=(...a)=>t.goProducts&&t.goProducts(...a))},Y),(0,e._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg",onClick:a[4]||(a[4]=(...a)=>t.goCheckout&&t.goCheckout(...a))},at)])):(0,e.kq)("",!0)])])])):(0,e.kq)("",!0)],64)}var et=o(9049),st=o(4301),ct=o(6294),nt=o(4677),lt=o(8778),it=o(2974),rt={components:{UserCheckoutBar:et.Z},computed:{...(0,st.rn)(ct.Z,["cartLoadingItem"]),...(0,st.rn)(nt.Z,["cart"]),...(0,st.Ah)(it.Z,["coupon_code"])},methods:{...(0,st.nv)(nt.Z,["getCart","updateCart","removeCartItem"]),...(0,st.nv)(lt.Z,["goProducts","goCheckout"]),...(0,st.nv)(it.Z,["addCouponCode"])}},dt=o(89);const ut=(0,dt.Z)(rt,[["render",ot],["__scopeId","data-v-5c24ac79"]]);var pt=ut}}]);
//# sourceMappingURL=735.6326fafe.js.map