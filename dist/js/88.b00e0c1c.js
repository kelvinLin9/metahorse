"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[88],{4677:function(e,t,a){var s=a(6265),l=a.n(s),o=a(1120),r=a(4301),c=a(6294);const n=(0,c.Z)();t["Z"]=(0,r.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";n.isLoading=!0,l().get(e).then((e=>{this.cartNum=e.data.data.carts.length,this.cart=e.data.data,n.isLoading=!1})).catch((e=>console.error(e)))},updateCart(e){const t=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${e.id}`;n.isLoading=!0,n.cartLoadingItem=e.id;const a={product_id:e.product_id,qty:e.qty};l().put(t,{data:a}).then((e=>{n.cartLoadingItem="",this.getCart()})).catch((e=>console.error(e)))},removeCartItem(e){n.cartLoadingItem=e;const t=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${e}`;n.isLoading=!0,l()["delete"](t).then((e=>{console.log(e),n.PushManager(e,"移除購物車品項"),n.cartLoadingItem="",this.getCart(),n.isLoading=!1})).catch((e=>console.error(e)))},addCart(e,t=1){const a="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";n.cartLoadingItem=e;const s={product_id:e,qty:t};l().post(a,{data:s}).then((e=>{n.cartLoadingItem="",this.getCart(),n.PushManager(e,"加入購物車")})).catch((e=>console.error(e)))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",t=this.form;l().post(e,{data:t}).then((e=>{o.Z.push(`/checkoutPay/${e.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((e=>console.error(e)))}}})},8778:function(e,t,a){var s=a(1120),l=a(4301),o=a(4677);const r=(0,o.Z)();t["Z"]=(0,l.Q_)("goStore",{actions:{goCart(){s.Z.push("/cart"),r.cartBoxState=!1},goProducts(){s.Z.push("/products"),r.cartBoxState=!1},goProduct(e){s.Z.push(`/product/${e}`)},goCheckout(){s.Z.push("/checkout")}}})},6294:function(e,t,a){var s=a(4301);t["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{PushManager(e,t="更新"){if("抽獎"===e||e.data.success){const e={style:"success",title:`${t}成功`};this.messages.push(e)}else{const a="string"===typeof e.data.message?[e.data.message]:e.data.message,s={style:"danger",title:`${t}失敗`,content:a.join("、")};this.messages.push(s)}}}})},2002:function(e,t,a){a.d(t,{Z:function(){return y}});var s=a(3396),l=a(7139);const o={class:"container py-4 checkout-bar w-75 no-print"},r={class:"row fs-5 fs-md-3 fw-bold"},c=(0,s.Uk)(" 購物"),n=(0,s._)("br",{class:"d-block d-sm-none"},null,-1),i=(0,s.Uk)("車 "),d=(0,s.Uk)(" 填寫"),m=(0,s._)("br",{class:"d-block d-sm-none"},null,-1),u=(0,s.Uk)("訂單 "),f=(0,s.Uk)(" 確認"),h=(0,s._)("br",{class:"d-block d-sm-none"},null,-1),p=(0,s.Uk)("付款 ");function g(e,t){const a=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[(0,s._)("div",{class:(0,l.C_)(["col d-flex flex-column px-2 py-3 align-items-center rounded-pill",{"bg-primary":"cart"===this.$route.name}])},[(0,s.Wm)(a,{icon:"fa-solid fa-1"}),c,n,i],2),(0,s._)("div",{class:(0,l.C_)(["col d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkout"===this.$route.name}])},[(0,s.Wm)(a,{icon:"fa-solid fa-2"}),d,m,u],2),(0,s._)("div",{class:(0,l.C_)(["col d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkoutPay"===this.$route.name}])},[(0,s.Wm)(a,{icon:"fa-solid fa-3"}),f,h,p],2)])])}var b=a(89);const _={},v=(0,b.Z)(_,[["render",g]]);var y=v},88:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var s=a(3396),l=a(7139),o=a(9242);const r={class:"container"},c={class:"py-3 row justify-content-center flex-sm-row-reverse"},n={class:"col-md-6"},i=(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 text-center fw-bold"},"購物清單")],-1),d={class:"table-responsive-md mt-4"},m={class:"table lh-lg"},u=(0,s._)("thead",{class:"table-primary"},[(0,s._)("tr",{class:"table-nowrap"},[(0,s._)("th",{class:"text-start"},"商品名稱"),(0,s._)("th",null,"數量"),(0,s._)("th",{class:"text-end"},"價格")])],-1),f={class:"text-center"},h={class:"text-end"},p={class:"text-strong"},g={class:"text-center table-primary"},b={colspan:"3",class:"text-end fs-4"},_=(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 fw-bold"},"收件人資訊")],-1),v={class:"mb-3"},y=(0,s._)("label",{for:"email",class:"form-label fw-bold fs-5"},"Email：",-1),x={class:"mb-3"},k=(0,s._)("label",{for:"name",class:"form-label fw-bold fs-5"},"收件人姓名：",-1),w={class:"mb-3"},C=(0,s._)("label",{for:"tel",class:"form-label fw-bold fs-5"},"收件人電話：",-1),Z={class:"mb-3"},U=(0,s._)("label",{for:"address",class:"form-label fw-bold fs-5"},"收件人地址：",-1),L={class:"mb-3"},V=(0,s._)("label",{for:"message",class:"form-label fw-bold fs-5"},"留言：",-1),W={class:"d-flex justify-content-between mt-3"},$=(0,s._)("i",{class:"bi bi-caret-left-fill"},null,-1),P=(0,s.Uk)("回購物車 "),S=[$,P],I=(0,s._)("button",{type:"submit",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg"},[(0,s.Uk)(" 付款去"),(0,s._)("i",{class:"bi bi-caret-right-fill"})],-1);function q(e,t,a,$,P,q){const B=(0,s.up)("UserCheckoutBar"),j=(0,s.up)("v-field"),M=(0,s.up)("ErrorMessage"),N=(0,s.up)("v-form");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(B),(0,s._)("div",r,[(0,s._)("div",c,[(0,s._)("div",n,[i,(0,s._)("div",d,[(0,s._)("table",m,[u,(0,s._)("tbody",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cart.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{class:"table-nowrap text-start",key:t.id},[(0,s._)("td",null,(0,l.zw)(t.product.title),1),(0,s._)("td",null,(0,l.zw)(t.qty),1),(0,s._)("td",h,[(0,s._)("div",p," NT$ "+(0,l.zw)(e.$filters.currency(t.final_total))+" 元 ",1)])])))),128))]),(0,s._)("tfoot",g,[(0,s._)("tr",null,[(0,s._)("td",b," 總計 :NT$ "+(0,l.zw)(e.$filters.currency(e.cart.final_total))+" 元 ",1)])])])])]),(0,s.Wm)(N,{class:"col-md-6",onSubmit:e.gotoPay},{default:(0,s.w5)((({errors:a})=>[_,(0,s._)("div",v,[y,(0,s.Wm)(j,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:e.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.user.email=t)},null,8,["class","modelValue"]),(0,s.Wm)(M,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",x,[k,(0,s.Wm)(j,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:e.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.user.name=t)},null,8,["class","modelValue"]),(0,s.Wm)(M,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",w,[C,(0,s.Wm)(j,{id:"tel",name:"電話",type:"tel",class:(0,l.C_)(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"numeric|min:7|max:10|required",modelValue:e.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.user.tel=t)},null,8,["class","modelValue"]),(0,s.Wm)(M,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",Z,[U,(0,s.Wm)(j,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:e.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.user.address=t)},null,8,["class","modelValue"]),(0,s.Wm)(M,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",L,[V,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.message=t)},null,512),[[o.nr,e.form.message]])]),(0,s._)("div",W,[(0,s._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg",onClick:t[5]||(t[5]=(0,o.iM)(((...t)=>e.goCart&&e.goCart(...t)),["prevent"]))},S),I])])),_:1},8,["onSubmit"])])])],64)}var B=a(2002),j=a(4301),M=a(4677),N=a(8778),z={components:{UserCheckoutBar:B.Z},computed:{...(0,j.rn)(M.Z,["cart","cartNum","gotoPay"]),...(0,j.Ah)(M.Z,["form"])},methods:{...(0,j.nv)(M.Z,["getCart"]),...(0,j.nv)(N.Z,["goCart"]),...(0,j.nv)(M.Z,["getCart"])}},D=a(89);const E=(0,D.Z)(z,[["render",q]]);var Q=E}}]);
//# sourceMappingURL=88.b00e0c1c.js.map