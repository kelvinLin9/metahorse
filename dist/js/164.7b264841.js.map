{"version":3,"file":"js/164.7b264841.js","mappings":"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","sources":["webpack://hw1/./src/stores/cartStore.js","webpack://hw1/./src/stores/goStore.js","webpack://hw1/./src/stores/statusStore.js","webpack://hw1/./src/views/UserCart.vue","webpack://hw1/./src/stores/couponStore.js","webpack://hw1/./src/views/UserCart.vue?698a"],"sourcesContent":["import axios from 'axios'\r\nimport { defineStore } from 'pinia'// 起手式\r\nimport statusStore from './statusStore'\r\n\r\n// 所有資料帶出來存到status\r\n// 把原本this改成status\r\nconst status = statusStore()\r\n\r\nexport default defineStore('cartStore', {\r\n  state: () => ({\r\n    cart: {},\r\n    cartNum: 0,\r\n    cartBoxState: false\r\n    // qty: 1 // 不需要 傳到後端就好\r\n  }),\r\n  actions: {\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      status.isLoading = true\r\n      axios.get(url)\r\n        .then((res) => {\r\n          console.log(\"GETC!!!!!!!!!!!!!!!!\")\r\n          this.cartNum = res.data.data.carts.length\r\n          console.log('this.cartNum', this.cartNum)\r\n          this.cart = res.data.data\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    // 更改購物車商品數量\r\n    updateCart (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      status.isLoading = true\r\n      status.cartLoadingItem = item.id\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty\r\n      }\r\n      axios.put(url, { data: cart })\r\n        .then((res) => {\r\n          status.cartLoadingItem = ''\r\n          this.getCart()\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    removeCartItem (id) {\r\n      status.cartLoadingItem = id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      status.isLoading = true\r\n      axios.delete(url)\r\n        .then((res) => {\r\n          console.log(res)\r\n          status.PushManager(res, '移除購物車品項')\r\n          status.cartLoadingItem = ''\r\n          this.getCart()\r\n          status.isLoading = false\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    addCart (id, qty = 1) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      status.cartLoadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      axios.post(url, { data: cart })\r\n        .then((res) => {\r\n          status.cartLoadingItem = ''\r\n          this.getCart() // 重新取得購物車資料\r\n          status.PushManager(res, '加入購物車')\r\n        })\r\n        .catch((err) => console.error(err))\r\n    },\r\n    cartBoxToggle () {\r\n      // 傳到ToastMessages 讓提示能移開避免擋到\r\n      this.cartBoxState = !this.cartBoxState\r\n      \r\n    }\r\n  }\r\n})\r\n","import router from '../router'\r\nimport { defineStore } from 'pinia'// 起手式\r\nimport cartStore from './cartStore'\r\n\r\nconst cart = cartStore()\r\n// 所有資料帶出來存到cart\r\n// 把原本this改成cart\r\n\r\nexport default defineStore('goStore', {\r\n  actions: {\r\n    goCart () {\r\n      router.push('/cart')\r\n      cart.cartBoxState = false\r\n    },\r\n    goProducts () {\r\n      router.push('/products')\r\n      cart.cartBoxState = false\r\n    },\r\n    goProduct (id) {\r\n      router.push(`/product/${id}`)\r\n    },\r\n    goCheckout () {\r\n      router.push('/checkout')\r\n    }\r\n  }\r\n})\r\n","import { defineStore } from 'pinia'\r\n\r\nexport default defineStore('statusStore', {\r\n  state: () => ({\r\n    isLoading: [],\r\n    cartLoadingItem: '',\r\n    messages: []\r\n  }),\r\n  actions: {\r\n    // 傳到ToastMessages.vue\r\n    PushManager (res, title = '更新') {\r\n      if (res.data.success) {\r\n        const obj = {\r\n          style: 'success',\r\n          title: `${title}成功`\r\n        }\r\n        this.messages.push(obj)\r\n      } else {\r\n        // 有些訊息是字串，有些則是陣列，在此統一格式\r\n        const message = typeof res.data.message === 'string'\r\n          ? [res.data.message]\r\n          : res.data.message\r\n        const obj = {\r\n          style: 'danger',\r\n          title: `${title}失敗`,\r\n          content: message.join('、')\r\n        }\r\n        this.messages.push(obj)\r\n      }\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <div class=\"cartBanner\">\r\n    <div class=\"bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center\">\r\n      <h1 class=\"w-100 d-flex align-items-center justify-content-center\">\r\n        <span class=\"me-2 fs-1 fw-bolder text-white\">首購享66折</span>\r\n        <span class=\"fs-3 text-primary align-self-end\">/ 結帳輸入優惠碼：666666</span>\r\n      </h1>\r\n    </div>\r\n  </div>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container my-5\">\r\n    <div class=\"d-flex justify-content-center\">\r\n      <h1 class=\"fs-2 text-center fw-bold\">購物清單</h1>\r\n    </div>\r\n    <div class=\"row mt-4\">\r\n      <!-- 購物車列表 -->\r\n      <div class=\"col\">\r\n        <table class=\"table align-middle\">\r\n          <thead class=\"table-primary\">\r\n            <tr>\r\n              <th>刪除</th>\r\n              <th>品名</th>\r\n              <th class=\"d-none d-sm-block\">圖片</th>\r\n              <th>單價</th>\r\n              <th style=\"width:80px\">數量</th>\r\n              <th>總價</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          <template v-if=\"cart.carts\">\r\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n              <td>\r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm\"\r\n                       :disabled=\"cartLoadingItem === item.id\"\r\n                       @click=\"removeCartItem(item.id)\">\r\n                  <i class=\"bi bi-x\"></i>\r\n                </button>\r\n              </td>\r\n              <td class=\"font-sm\">\r\n                {{ item.product.title }}<br>\r\n                <small class=\"text-secondary fw-bold\" v-if=\"item.coupon\">\r\n                  已套用優惠券<br> ({{item.final_total / item.total * 100 }}% OFF)<br>\r\n                  代碼：{{item.coupon.code}}\r\n                </small>\r\n              </td>\r\n              <td class=\"d-none d-sm-block\">\r\n                <img :src=\"item.product.imageUrl\" alt=\"商品照片\" width=\"50\">\r\n              </td>\r\n              <td class=\"font-sm\">\r\n                NT$<br class=\"d-md-none\"> \r\n                {{item.product.price}}\r\n              </td>\r\n              <td>\r\n                <div class=\"input-group input-group-sm\">\r\n                  <input type=\"number\" class=\"form-control\"\r\n                       min=\"1\"\r\n                       :disabled=\"item.id === cartLoadingItem\"\r\n                       @change=\"updateCart(item)\"\r\n                       v-model.number=\"item.qty\"\r\n                       @input=\"item.qty = Number($event.target.value.replace(/^(0+)|[^\\d]+/g, '')) || 1\">\r\n                </div>\r\n              </td>\r\n              <td class=\"font-sm\">\r\n                <div v-if=\"item.final_total === item.total\">\r\n                   NT$ {{ $filters.currency(item.final_total) }}\r\n                </div>\r\n                <div v-if=\"item.final_total !== item.total\">\r\n                  <small class=\"text-secondary\">\r\n                  折扣價：\r\n                  </small><br class=\"d-lg-none\">\r\n                  NT$ {{ $filters.currency(item.final_total) }}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </template>\r\n          </tbody>\r\n          <tfoot>\r\n          <tr v-if=\"cart.final_total == cart.total\">\r\n            <td colspan=\"7\" class=\"text-end fs-3\">\r\n              總計：NT$ {{ $filters.currency(cart.total) }}\r\n            </td>\r\n         </tr>\r\n         <tr v-if=\"cart.final_total !== cart.total\">\r\n           <td colspan=\"7\" class=\"text-end fs-4\">\r\n             <del>總計：NT$ {{ $filters.currency(cart.total) }}</del>\r\n           </td>\r\n         </tr>\r\n         <tr v-if=\"cart.final_total !== cart.total\">\r\n           <td colspan=\"7\" class=\"text-end text-secondary fw-bold fs-3\">\r\n             折扣價：NT$ {{ $filters.currency(cart.final_total) }}\r\n           </td>\r\n         </tr>\r\n         </tfoot>\r\n        </table>\r\n\r\n        <div class=\"input-group mb-3 input-group-sm\"\r\n             v-if=\"cart.total !== 0\">\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"請輸入優惠碼\"\r\n          v-model=\"coupon_code\">\r\n          <div class=\"input-group-append\">\r\n            <button class=\"btn btn-outline-secondary fw-bold btn-lg\" type=\"button\" \r\n            @click=\"addCouponCode(coupon_code)\">\r\n              套用優惠碼\r\n            </button>\r\n          </div>\r\n        </div>\r\n      <div class=\"d-flex justify-content-between mt-5\"\r\n             v-if=\"cart.total !== 0\">\r\n          <button type=\"button\" class=\"btn btn-primary btn-hover rounded-0 fw-bold btn-lg\"\r\n                @click=\"goProducts\">\r\n            <i class=\"bi bi-caret-left-fill\"></i>商品列表\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary btn-hover rounded-0 fw-bold btn-lg\"\r\n                  @click=\"goCheckout\">\r\n            填寫資料<i class=\"bi bi-caret-right-fill\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"text-center pt-4\"\r\n             v-if=\"cart.total === 0\">\r\n          <h3 class=\"fw-bold\">購物車還沒有任何商品，趕快挑選產品加入購物車 !</h3>\r\n          <button type=\"button\" class=\"btn btn-dark btn-hover rounded-0 mt-5\"\r\n                  @click=\"goProducts\">\r\n            查看產品 Go\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions, mapWritableState } from 'pinia'\r\nimport statusStore from '@/stores/statusStore'\r\nimport cartStore from '@/stores/cartStore'\r\nimport goStore from '@/stores/goStore'\r\nimport couponStore from '@/stores/couponStore'\r\nexport default {\r\n  computed: {\r\n    ...mapState(statusStore, ['isLoading', 'cartLoadingItem']),\r\n    ...mapState(cartStore, ['cart']),\r\n    ...mapWritableState(couponStore, ['coupon_code'])\r\n  },\r\n  methods: {\r\n    ...mapActions(cartStore, ['getCart', 'updateCart', 'removeCartItem']),\r\n    ...mapActions(goStore, ['goProducts', 'goCheckout']),\r\n    ...mapActions(couponStore, ['addCouponCode'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cartBanner {\r\n  height: 300px;\r\n  background-image: url(https://i.imgur.com/6ix9eOm.jpg);\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position:center ;\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  .font-sm{\r\n    font-size: 12px;\r\n  }\r\n}\r\n</style>\r\n","import axios from 'axios'\r\nimport { defineStore } from 'pinia'// 起手式\r\nimport statusStore from './statusStore'\r\nimport cartStore from './cartStore'\r\n\r\nconst status = statusStore()\r\nconst cart = cartStore()\r\n\r\nexport default defineStore('couponStore', {\r\n  state: () => ({\r\n    coupon_code: ''\r\n  }),\r\n  actions: {\r\n    addCouponCode (i) {\r\n      this.coupon_code = i\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const coupon = {\r\n        code: `${i}`\r\n      }\r\n      status.isLoading = true\r\n      axios.post(url, { data: coupon })\r\n        .then((res) => {\r\n          status.PushManager(res, '加入優惠券')\r\n          cart.getCart()\r\n          status.isLoading = false\r\n          this.coupon_code = ''\r\n        })\r\n        .catch((err) => console.error(err))\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=4648a580&scoped=true\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport \"./UserCart.vue?vue&type=style&index=0&id=4648a580&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\kelvi\\\\Desktop\\\\github\\\\metahorse\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4648a580\"]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","cart","cartNum","cartBoxState","actions","getCart","url","isLoading","axios","then","res","console","log","this","data","carts","length","catch","err","error","updateCart","item","id","cartLoadingItem","product_id","qty","removeCartItem","PushManager","addCart","cartBoxToggle","cartStore","goCart","router","goProducts","goProduct","goCheckout","messages","title","success","obj","style","push","message","content","join","class","_createElementVNode","_hoisted_9","colspan","_hoisted_38","_hoisted_42","_hoisted_1","_createVNode","_component_Loading","active","_ctx","_hoisted_3","_hoisted_7","_createElementBlock","_Fragment","key","_renderList","type","disabled","onClick","product","_hoisted_12","coupon","_hoisted_15","_toDisplayString","final_total","total","_hoisted_16","code","src","imageUrl","alt","width","_hoisted_21","price","min","onChange","$event","onInput","Number","target","value","replace","_hoisted_25","currency","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_31","_hoisted_33","placeholder","_hoisted_45","coupon_code","addCouponCode","i","computed","mapState","mapWritableState","couponStore","methods","mapActions","goStore","__exports__","render"],"sourceRoot":""}