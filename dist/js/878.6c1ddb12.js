"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[878],{7429:function(t,i,e){e.d(i,{Z:function(){return C}});var s=e(3396),a=e(9242);const o=t=>((0,s.dD)("data-v-11da1bf7"),t=t(),(0,s.Cn)(),t),n={class:"footer bg-dark mt-3 py-4 mt-md-5"},l={class:"container-fluid"},r=o((()=>(0,s._)("ul",{class:"list-inline text-center"},[(0,s._)("li",{class:"list-inline-item text-light"}," © Copyright 2022 MetaHorse ")],-1))),c={class:"list-inline text-center"},d={class:"list-inline-item"},u=o((()=>(0,s._)("i",{class:"bi bi-facebook"},null,-1))),h=[u],f={class:"list-inline-item ms-2"},g=o((()=>(0,s._)("i",{class:"bi bi-messenger"},null,-1))),p=[g],v={class:"list-inline-item ms-2"},m=o((()=>(0,s._)("i",{class:"bi bi-instagram"},null,-1))),b=[m],_=o((()=>(0,s._)("li",{class:"list-inline-item ms-2"},[(0,s._)("a",{class:"text-light",href:"",target:"_blank"},[(0,s._)("i",{class:"bi bi-github"})])],-1))),k=o((()=>(0,s._)("ul",{class:"list-inline text-center"},[(0,s._)("li",{class:"list-inline-item text-light"}," 個人練習作品，非商業用途 ")],-1)));function x(t,i){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",l,[r,(0,s._)("ul",c,[(0,s._)("li",d,[(0,s._)("a",{class:"text-light",href:"#",onClick:i[0]||(i[0]=(0,a.iM)((()=>{}),["prevent"]))},h)]),(0,s._)("li",f,[(0,s._)("a",{class:"text-light",href:"#",onClick:i[1]||(i[1]=(0,a.iM)((()=>{}),["prevent"]))},p)]),(0,s._)("li",v,[(0,s._)("a",{class:"text-light",href:"#",onClick:i[2]||(i[2]=(0,a.iM)((()=>{}),["prevent"]))},b)]),_]),k])])}var w=e(89);const y={},I=(0,w.Z)(y,[["render",x],["__scopeId","data-v-11da1bf7"]]);var C=I},878:function(t,i,e){e.r(i),e.d(i,{default:function(){return P}});var s=e(3396),a=e(9242),o=e(7139);const n=t=>((0,s.dD)("data-v-ad0560ee"),t=t(),(0,s.Cn)(),t),l={class:"bg-light"},r={key:0,class:"container-fluid"},c={class:"d-flex flex-column justify-content-center align-items-center"},d=n((()=>(0,s._)("h1",{class:"fs-2 text-center fw-bold mb-5"},"目前沒有收藏任何商品",-1))),u=(0,s.Uk)("回產品列表"),h={class:"container pt-5"},f={key:0,class:"row g-4 justify-content-center"},g=n((()=>(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 text-center fw-bold"},"我的最愛")],-1))),p={class:"card rounded-3"},v={class:"card-img overflow-hidden position-relative scale"},m=["onClick"],b=["src"],_={class:"card-body d-flex flex-column justify-content-center text-center fw-bold"},k={class:"fs-4"},x={class:"fs-6 text-muted"},w={class:"fs-5"},y={class:"text-muted text-decoration-line-through fs-6 ms-1"},I={class:"px-3 py-2 d-flex justify-content-between"},C=["onClick"],F=["disabled","onClick"],D={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},L=n((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),M=[L],U=(0,s.Uk)(" 加到購物車 ");function Z(t,i,e,n,L,Z){const $=(0,s.up)("RouterLink"),j=(0,s.up)("UserFooter");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",l,[0===L.favorite.length?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",c,[d,(0,s.Wm)($,{to:"products",type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-5"},{default:(0,s.w5)((()=>[u])),_:1})])])):(0,s.kq)("",!0),(0,s._)("div",h,[0!==L.favorite.length?((0,s.wg)(),(0,s.iD)("div",f,[g,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.favorite,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col-md-6 col-lg-4 col-12",key:t.id},[(0,s._)("div",p,[(0,s._)("div",v,[(0,s._)("button",{class:"btn bg-dark fs-4 position-absolute text-white w-100 h-100 bg-opacity-75",type:"button",onClick:(0,a.iM)((i=>Z.goProduct(t.id)),["prevent"])}," 詳細資訊 ",8,m),(0,s._)("img",{class:"rounded-3 img-fit",src:t.imageUrl,alt:"商品照片"},null,8,b)]),(0,s._)("div",_,[(0,s._)("span",k,[(0,s.Uk)((0,o.zw)(t.title)+" ",1),(0,s._)("span",x,"（"+(0,o.zw)(t.category)+"）",1)]),(0,s._)("span",w,[(0,s.Uk)(" NT $"+(0,o.zw)(t.price)+" ",1),(0,s._)("span",y,"$"+(0,o.zw)(t.origin_price),1)]),(0,s._)("div",I,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary fw-bold fs-5 px-3",onClick:(0,a.iM)((i=>Z.removeFavorite(t.id)),["stop"])}," 移除收藏 ",8,C),(0,s._)("button",{type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-5 px-3",disabled:this.status.loadingItem===t.id,onClick:(0,a.iM)((i=>Z.addCart(t.id)),["stop"])},[this.status.loadingItem===t.id?((0,s.wg)(),(0,s.iD)("div",D,M)):(0,s.kq)("",!0),U],8,F)])])])])))),128))])):(0,s.kq)("",!0)])]),(0,s.Wm)(j)],64)}var $=e(5820),j=e(7429),q={data(){return{favorite:[],favoriteIds:[],isLoading:!1,status:{loadingItem:""}}},components:{UserFooter:j.Z},inject:["emitter"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1,this.getFavoriteIds()}))},getFavorite(){this.favorite=[],this.products.forEach((t=>{this.favoriteIds.indexOf(t.id)>-1&&this.favorite.push(t)})),$.Z.emit("updateFavorite",this.favorite),console.log("this.favorite",this.favorite)},getFavoriteIds(){this.favoriteIds=JSON.parse(localStorage.getItem("favoriteIds"))||[],console.log(this.favoriteIds),this.getFavorite()},removeFavorite(t){this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds)),this.getFavoriteIds(),$.Z.emit("update-favoriteIds")},addCart(t){const i="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(i,{data:e}).then((t=>{this.status.loadingItem="",console.log("加入購物車後回傳的訊息",t),this.getCart(),$.Z.emit("update-cart")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";this.isLoading=!0,this.$http.get(t).then((t=>{console.log("重新取得購物車訊息",t),this.cart=t.data.data,this.isLoading=!1}))},goProduct(t){this.$router.push(`/product/${t}`)}},created(){this.getProducts()}},z=e(89);const O=(0,z.Z)(q,[["render",Z],["__scopeId","data-v-ad0560ee"]]);var P=O}}]);
//# sourceMappingURL=878.6c1ddb12.js.map