"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[654],{4677:function(t,e,s){var a=s(6265),o=s.n(a),r=s(1120),i=s(4301),c=s(6294);const d=(0,c.Z)();e["Z"]=(0,i.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";d.isLoading=!0,o().get(t).then((t=>{this.cartNum=t.data.data.carts.length,this.cart=t.data.data,d.isLoading=!1})).catch((t=>console.error(t)))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t.id}`;d.isLoading=!0,d.cartLoadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};o().put(e,{data:s}).then((t=>{d.cartLoadingItem="",this.getCart()})).catch((t=>console.error(t)))},removeCartItem(t){d.cartLoadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;d.isLoading=!0,o()["delete"](e).then((t=>{console.log(t),d.PushManager(t,"移除購物車品項"),d.cartLoadingItem="",this.getCart(),d.isLoading=!1})).catch((t=>console.error(t)))},addCart(t,e=1){const s="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";d.cartLoadingItem=t;const a={product_id:t,qty:e};o().post(s,{data:a}).then((t=>{d.cartLoadingItem="",this.getCart(),d.PushManager(t,"加入購物車")})).catch((t=>console.error(t)))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",e=this.form;o().post(t,{data:e}).then((t=>{r.Z.push(`/checkoutPay/${t.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((t=>console.error(t)))}}})},9498:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("favoriteStore",{state:()=>({favorite:[],favoriteIds:[],favoriteNum:0,products:[]}),actions:{productsBus(t){this.products=t,this.getFavorite()},getFavoriteIds(){this.favoriteIds=JSON.parse(localStorage.getItem("favoriteIds"))||[]},getFavorite(){this.getFavoriteIds(),this.favorite=[],this.products.forEach((t=>{this.favoriteIds.indexOf(t.id)>-1&&this.favorite.push(t)})),this.favoriteNum=this.favorite.length},toggleFavorite(t){const e=t,s=this.favoriteIds.some((t=>t===e));if(s){const t=this.favoriteIds.find((t=>t===e));this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds))}else this.favoriteIds.push(t),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds));this.getFavorite()},removeFavorite(t){this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds)),this.getFavorite()}},getters:{favState(){return t=>this.favoriteIds.indexOf(t)>-1?"bi bi-heart-fill":"bi bi-heart"}}})},8778:function(t,e,s){var a=s(1120),o=s(4301),r=s(4677);const i=(0,r.Z)();e["Z"]=(0,o.Q_)("goStore",{actions:{goCart(){a.Z.push("/cart"),i.cartBoxState=!1},goProducts(){a.Z.push("/products"),i.cartBoxState=!1},goProduct(t){a.Z.push(`/product/${t}`)},goCheckout(){a.Z.push("/checkout")}}})},4238:function(t,e,s){var a=s(6265),o=s.n(a),r=s(4301),i=s(6294),c=s(9498);const d=(0,i.Z)(),l=(0,c.Z)();e["Z"]=(0,r.Q_)("productStore",{state:()=>({products:[],product:{},productsHot:[],productsGame:[],temp:{},category:"all"}),actions:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/products/all";d.isLoading=!0,o().get(t).then((t=>{this.products=t.data.products,this.productsHot=this.products.filter(((t,e)=>e>14)),l.productsBus(this.products),this.productsGame=[],this.productsGame.push(t.data.products[11]),this.productsGame.push(t.data.products[10]),this.productsGame.push(t.data.products[8]),this.productsGame.push(t.data.products[5]),this.temp=this.productsGame[0],d.isLoading=!1})).catch((t=>console.error(t)))},getProduct(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/product/${t}`;d.isLoading=!0,o().get(e).then((t=>{d.isLoading=!1,t.data.success&&(this.product=t.data.product,this.product.qty=1)}))},setCategory(t){this.category=t}},getters:{filterProducts(){let t;switch(this.category){case"all":t=this.products.filter((t=>t));break;case"S":t=this.products.filter((t=>"S"===t.category));break;case"A":t=this.products.filter((t=>"A"===t.category));break;case"B":t=this.products.filter((t=>"B"===t.category));break;case"C":t=this.products.filter((t=>"C"===t.category));break;case"馬鞍":t=this.products.filter((t=>"馬鞍"===t.description));break;case"馬蹄鐵":t=this.products.filter((t=>"馬蹄鐵"===t.description));break;case"馬飼料":t=this.products.filter((t=>"馬飼料"===t.description));break}return t}}})},6294:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{PushManager(t,e="更新"){if("抽獎"==t||t.data.success){const t={style:"success",title:`${e}成功`};this.messages.push(t)}else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message,a={style:"danger",title:`${e}失敗`,content:s.join("、")};this.messages.push(a)}}}})},2654:function(t,e,s){s.r(e),s.d(e,{default:function(){return J}});var a=s(3396),o=s(7139),r=s(9242);const i=t=>((0,a.dD)("data-v-32a497fd"),t=t(),(0,a.Cn)(),t),c=(0,a.uE)('<div class="productsBanner" data-v-32a497fd><div class="bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center" data-v-32a497fd><h1 class="w-100 d-flex align-items-center justify-content-center" data-v-32a497fd><span class="me-2 fs-1 fw-bolder text-white" data-v-32a497fd>所有商品</span><span class="fs-5 text-primary align-self-end" data-v-32a497fd>/ Products</span></h1></div></div>',1),d={class:"container py-5"},l={class:"row"},n={class:"col-lg-3"},g=i((()=>(0,a._)("h2",{class:"fw-bold text-center f-kalam bg-primary"},"賽馬( Level )",-1))),u={class:"fw-bold list-group flex-row flex-lg-column"},p=i((()=>(0,a._)("hr",null,null,-1))),h=i((()=>(0,a._)("h2",{class:"fw-bold text-center f-kalam bg-primary"},"道具",-1))),f={class:"fw-bold list-group flex-row flex-lg-column"},v={class:"col-lg-9"},m={class:"row g-4"},y={class:"card rounded-3"},k={class:"card-img overflow-hidden position-relative scale"},C=["onClick"],b=["src"],_=["onClick"],x={class:"card-body d-flex flex-column text-center fw-bold"},I={class:"fs-5"},w={class:"fs-6 text-muted"},S={class:"fs-5"},L={class:"text-muted text-decoration-line-through fs-6 ms-1"},Z=["disabled","onClick"],P={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},B=i((()=>(0,a._)("span",{class:"visually-hidden"},"Loading...",-1))),M=[B],F=(0,a.Uk)(" 加到購物車 "),N=i((()=>(0,a._)("div",{class:"d-flex justify-content-center pb-2 fw-bold"},null,-1)));function $(t,e,s,i,B,$){return(0,a.wg)(),(0,a.iD)(a.HY,null,[c,(0,a._)("div",d,[(0,a._)("div",l,[(0,a._)("div",n,[g,(0,a._)("div",u,[(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"all"==t.category,"fs-4":"all"==t.category}]),onClick:e[0]||(e[0]=(0,r.iM)((e=>t.setCategory("all")),["prevent"]))},"- All",2),(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"S"==t.category,"fs-4":"S"==t.category}]),onClick:e[1]||(e[1]=(0,r.iM)((e=>t.setCategory("S")),["prevent"]))},"- S",2),(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"A"==t.category,"fs-4":"A"==t.category}]),onClick:e[2]||(e[2]=(0,r.iM)((e=>t.setCategory("A")),["prevent"]))},"- A",2),(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"B"==t.category,"fs-4":"B"==t.category}]),onClick:e[3]||(e[3]=(0,r.iM)((e=>t.setCategory("B")),["prevent"]))},"- B",2),(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"C"==t.category,"fs-4":"C"==t.category}]),onClick:e[4]||(e[4]=(0,r.iM)((e=>t.setCategory("C")),["prevent"]))},"- C",2)]),p,h,(0,a._)("div",f,[(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"馬鞍"==t.category,"fs-4":"馬鞍"==t.category}]),onClick:e[5]||(e[5]=(0,r.iM)((e=>t.setCategory("馬鞍")),["prevent"]))},"- 馬鞍",2),(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"馬蹄鐵"==t.category,"fs-4":"馬蹄鐵"==t.category}]),onClick:e[6]||(e[6]=(0,r.iM)((e=>t.setCategory("馬蹄鐵")),["prevent"]))},"- 馬蹄鐵",2),(0,a._)("a",{href:"#",class:(0,o.C_)(["list-group-item list-group-item-action border-0 f-kalam fs-5",{"text-primary":"馬飼料"==t.category,"fs-4":"馬飼料"==t.category}]),onClick:e[7]||(e[7]=(0,r.iM)((e=>t.setCategory("馬飼料")),["prevent"]))},"- 馬飼料",2)])]),(0,a._)("div",v,[(0,a._)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.filterProducts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col-lg-4 col-md-6 col-12",key:e.id},[(0,a._)("div",y,[(0,a._)("div",k,[(0,a._)("button",{class:"btn bg-dark fs-4 position-absolute text-white w-100 h-100 bg-opacity-75",type:"button",onClick:(0,r.iM)((s=>t.goProduct(e.id)),["prevent"])}," 詳細資訊 ",8,C),(0,a._)("img",{class:"rounded-3 img-fit",src:e.imageUrl,alt:"商品照片"},null,8,b),(0,a._)("span",{class:"position-absolute rounded-circle fs-2 p-1 fav-icon bg-white d-flex justify-content-center align-items-center",onClick:(0,r.iM)((s=>t.toggleFavorite(e.id)),["stop"])},[(0,a._)("i",{class:(0,o.C_)(t.favState(e.id)),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"加入 / 移除我的最愛"},null,2)],8,_)]),(0,a._)("div",x,[(0,a._)("span",I,[(0,a.Uk)((0,o.zw)(e.title)+" ",1),(0,a._)("span",w,"（"+(0,o.zw)(e.category)+"）",1)]),(0,a._)("span",S,[(0,a.Uk)(" NT $"+(0,o.zw)(e.price)+" ",1),(0,a._)("span",L,"$"+(0,o.zw)(e.origin_price),1)]),(0,a._)("button",{type:"button",class:"btn btn-outline-primary text-dark fw-bold fs-5 mt-3",disabled:t.cartLoadingItem===e.id,onClick:s=>t.addCart(e.id)},[t.cartLoadingItem===e.id?((0,a.wg)(),(0,a.iD)("div",P,M)):(0,a.kq)("",!0),F],8,Z)]),N])])))),128))])])])])],64)}var O=s(4301),A=s(4238),G=s(4677),q=s(6294),D=s(9498),Q=s(8778),j={methods:{...(0,O.nv)(D.Z,["getFavorite","getFavoriteIds","toggleFavorite"]),...(0,O.nv)(A.Z,["getProducts","setCategory"]),...(0,O.nv)(G.Z,["getCart","addCart"]),...(0,O.nv)(Q.Z,["goProduct"])},computed:{...(0,O.rn)(D.Z,["favorite","favoriteIds","favState"]),...(0,O.rn)(A.Z,["products","filterProducts","category"]),...(0,O.rn)(q.Z,["cartLoadingItem"])}},z=s(89);const H=(0,z.Z)(j,[["render",$],["__scopeId","data-v-32a497fd"]]);var J=H}}]);
//# sourceMappingURL=654.4fdbe327.js.map