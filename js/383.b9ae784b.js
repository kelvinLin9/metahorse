"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[383],{9498:function(t,a,e){var s=e(4301);a["Z"]=(0,s.Q_)("favoriteStore",{state:()=>({favorite:[],favoriteIds:[],favoriteNum:0,products:[]}),actions:{productsBus(t){this.products=t,this.getFavorite()},getFavoriteIds(){this.favoriteIds=JSON.parse(localStorage.getItem("favoriteIds"))||[]},getFavorite(){this.getFavoriteIds(),this.favorite=[],this.products.forEach((t=>{this.favoriteIds.indexOf(t.id)>-1&&this.favorite.push(t)})),this.favoriteNum=this.favorite.length},toggleFavorite(t){const a=t,e=this.favoriteIds.some((t=>t===a));if(e){const t=this.favoriteIds.find((t=>t===a));this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds))}else this.favoriteIds.push(t),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds));this.getFavorite()},removeFavorite(t){this.favoriteIds.splice(this.favoriteIds.indexOf(t),1),localStorage.setItem("favoriteIds",JSON.stringify(this.favoriteIds)),this.getFavorite()}},getters:{favState(){return t=>this.favoriteIds.indexOf(t)>-1?"fa-solid fa-heart":"fa-regular fa-heart"}}})},8778:function(t,a,e){var s=e(1120),o=e(4301),r=e(4677);const i=(0,r.Z)();a["Z"]=(0,o.Q_)("goStore",{actions:{goCart(){s.Z.push("/cart"),i.cartBoxState=!1},goProducts(){s.Z.push("/products"),i.cartBoxState=!1},goProduct(t){s.Z.push(`/product/${t}`)},goCheckout(){s.Z.push("/checkout")}}})},4238:function(t,a,e){var s=e(6265),o=e.n(s),r=e(4301),i=e(6294),c=e(9498);const n=(0,i.Z)(),l=(0,c.Z)();a["Z"]=(0,r.Q_)("productStore",{state:()=>({products:[],product:{},productsHot:[],productsGame:[],productsRelated:[],temp:{},category:"all",cacheSearch:""}),actions:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/products/all";n.isLoading=!0,o().get(t).then((t=>{this.products=t.data.products,this.products.forEach((t=>{t.qty=1})),this.productsHot=this.products.filter(((t,a)=>a>14)),l.productsBus(this.products),this.productsGame=[],this.productsGame.push(t.data.products[11]),this.productsGame.push(t.data.products[10]),this.productsGame.push(t.data.products[8]),this.productsGame.push(t.data.products[5]),this.temp=this.productsGame[0],n.isLoading=!1})).catch((()=>{n.isLoading=!1,n.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},getProduct(t){const a=`https://vue3-course-api.hexschool.io/api/kelvinlin9/product/${t}`;n.isLoading=!0,o().get(a).then((t=>{n.isLoading=!1,t.data.success&&(this.product=t.data.product,this.product.qty=1,this.productsRelated=[...this.products],this.productsRelated.splice(20-this.product.num,1),"遊戲道具"===this.product.category?this.productsRelated=this.productsRelated.filter(((t,a)=>"遊戲道具"===t.category)):this.productsRelated=this.productsRelated.filter(((t,a)=>"遊戲道具"!==t.category)))})).catch((()=>{n.isLoading=!1,n.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},setCategory(t){this.category=t}},getters:{filterProducts(){let t;if(""===this.cacheSearch){switch(this.category){case"all":t=this.products.filter((t=>t));break;case"S":t=this.products.filter((t=>"S"===t.category));break;case"A":t=this.products.filter((t=>"A"===t.category));break;case"B":t=this.products.filter((t=>"B"===t.category));break;case"C":t=this.products.filter((t=>"C"===t.category));break;case"馬鞍":t=this.products.filter((t=>"馬鞍"===t.description));break;case"馬蹄鐵":t=this.products.filter((t=>"馬蹄鐵"===t.description));break;case"馬飼料":t=this.products.filter((t=>"馬飼料"===t.description));break}return t}return this.products.filter((t=>t.title.match(this.cacheSearch)))}}})},5016:function(t,a,e){e.r(a),e.d(a,{default:function(){return bt}});var s=e(3396);const o={key:0,class:"user-loading position-absolute top-50 start-50 translate-middle"},r={class:"position-relative min-height milkyWay"};function i(t,a,e,i,c,n){const l=(0,s.up)("UserNavbar"),d=(0,s.up)("UserLoading"),u=(0,s.up)("FloatCart"),p=(0,s.up)("ToastMessages"),g=(0,s.up)("RouterView"),h=(0,s.up)("GoTop"),v=(0,s.up)("UserFooter");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.j4)(l,{key:t.$route.path})),t.isLoading?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(d)])):(0,s.kq)("",!0),n.hasFloatCart?((0,s.wg)(),(0,s.j4)(u,{key:1})):(0,s.kq)("",!0),(0,s.Wm)(p),(0,s._)("div",r,[((0,s.wg)(),(0,s.j4)(g,{key:t.$route.path}))]),(0,s.Wm)(h),(0,s.Wm)(v)],64)}e(6699);var c=e(6799),n=e(2286),l=e(7139),d=e(9242);const u=t=>((0,s.dD)("data-v-f3c4c71c"),t=t(),(0,s.Cn)(),t),p={class:"navbar sticky-top navbar-expand-lg navbar-dark bg-dark no-print"},g={class:"container-fluid"},h=(0,s.uE)('<a class="navbar-brand" href="#" data-v-f3c4c71c><span class="text-warning f-kalam fs-2 text-center" data-v-f3c4c71c>MetaHorse</span><img src="https://storage.googleapis.com/vue-course-api.appspot.com/kelvinlin9/1666490927331.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&amp;Expires=1742169600&amp;Signature=ZMQ6vOwjCgcPZNVwcyYK8LMN5koHVFmYYrchE8TwG0EXn64m4cQSrpVuY2A%2BML%2BvP8tQ9YrFRjAcTVr%2BMvB1ku3hA2AIma%2FDoybnYVRGT5ESCrq%2FXYuVKILUH8GmJLc4j7Wtnyh3Ai8rcEuiGp%2BWw%2Bi9lmMAQksyFruCvbYOAA58yy%2F3pvNM4ta1TAhSOZjAx6ngIUwS8cfmHaETVeKQU62sfskvZG3G43hgGZ%2Bz2BjVagCaGHWSpEWupz58evWUovo4s1ASzlLX%2B3BFLH9KcAvYPJfFfapPLT9sGBwk9MrUoYtfLAOxc%2F8s4BlnP%2FhNaglAlQiuNiuMrGbN0SMUkA%3D%3D" alt="logo" width="50" class="logo" data-v-f3c4c71c></a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation" data-v-f3c4c71c><span class="navbar-toggler-icon" data-v-f3c4c71c></span></button>',2),v={class:"collapse navbar-collapse ms-5",id:"navbarNavAltMarkup"},f={class:"navbar-nav"},m={class:"nav-item"},b=(0,s.Uk)("首頁"),k={class:"nav-item"},w=(0,s.Uk)("產品列表"),_={class:"nav-item"},y=(0,s.Uk)("優惠活動"),x={class:"nav-item"},C=(0,s.Uk)("訂單查詢"),I={class:"nav-item d-block d-lg-none"},Z=(0,s.Uk)("購物車"),N={class:"nav-item d-block d-lg-none"},S=(0,s.Uk)("我的最愛"),F={class:"navbar-nav d-none d-lg-flex ms-auto me-2"},U={class:"nav-item position-relative"},B=u((()=>(0,s._)("i",{class:"bi bi-cart3 fs-4 cart","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"購物車"},null,-1))),A={key:0,class:"bg-danger text-white rounded-circle text-center position-absolute num"},L={key:0,class:"fw-bold"},W={class:"table-responsive-md he"},G={class:"table table-sm"},T=u((()=>(0,s._)("thead",{class:"table-dark"},[(0,s._)("tr",{class:"table-nowrap text-center"},[(0,s._)("th",{class:"text-start"},"商品名稱"),(0,s._)("th",{style:{width:"70px"}},"數量"),(0,s._)("th",{class:"text-end"},"價格"),(0,s._)("th")])],-1))),M={class:"input-group input-group-sm"},D=["disabled","onChange","onUpdate:modelValue","onInput"],$={class:"text-end"},O=u((()=>(0,s._)("small",{class:"fs-7"}," NT$ ",-1))),P={class:"text-center"},j=["disabled","onClick"],q=u((()=>(0,s._)("i",{class:"bi bi-x"},null,-1))),R=[q],Y={key:1,class:"fw-bold text-center mb-3"},V={class:"d-flex justify-content-end"},z=(0,s.Uk)(" 結帳去 "),E=(0,s.Uk)(" 選購去 "),H={class:"nav-item position-relative"},Q=u((()=>(0,s._)("i",{class:"bi bi-search-heart fs-4","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"我的最愛"},null,-1))),J={key:0,class:"bg-danger text-white rounded-circle text-center position-absolute num"};function K(t,a,e,o,r,i){const c=(0,s.up)("RouterLink"),n=(0,s.up)("FontAwesomeIcon");return(0,s.wg)(),(0,s.iD)("nav",p,[(0,s._)("div",g,[h,(0,s._)("div",v,[(0,s._)("ul",f,[(0,s._)("li",m,[(0,s.Wm)(c,{to:"/",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"home"===t.$route.name}])},{default:(0,s.w5)((()=>[b])),_:1},8,["class"])]),(0,s._)("li",k,[(0,s.Wm)(c,{to:"/products",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"products"===t.$route.name}])},{default:(0,s.w5)((()=>[w])),_:1},8,["class"])]),(0,s._)("li",_,[(0,s.Wm)(c,{to:"/UserCoupon",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"UserCoupon"===t.$route.name}])},{default:(0,s.w5)((()=>[y])),_:1},8,["class"])]),(0,s._)("li",x,[(0,s.Wm)(c,{to:"/UserSearchOrder",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"UserSearchOrder"===t.$route.name}])},{default:(0,s.w5)((()=>[C])),_:1},8,["class"])]),(0,s._)("li",I,[(0,s.Wm)(c,{to:"/cart",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"cart"===t.$route.name}])},{default:(0,s.w5)((()=>[Z])),_:1},8,["class"])]),(0,s._)("li",N,[(0,s.Wm)(c,{to:"/favorite",class:(0,l.C_)(["nav-link fs-5",{"text-warning":"favorite"===t.$route.name}])},{default:(0,s.w5)((()=>[S])),_:1},8,["class"])])]),(0,s._)("ul",F,[(0,s._)("li",U,[(0,s._)("div",{class:(0,l.C_)(["nav-link px-3",{"text-warning":"cart"===t.$route.name}]),onClick:a[0]||(a[0]=(...a)=>t.cartBoxToggle&&t.cartBoxToggle(...a))},[B,0!==t.cartNum?((0,s.wg)(),(0,s.iD)("div",A,(0,l.zw)(t.cartNum),1)):(0,s.kq)("",!0)],2)]),(0,s._)("div",{class:(0,l.C_)(["dropdown-menu cart-box p-3 overflow-auto",{show:t.cartBoxState}])},[t.cartNum>0?((0,s.wg)(),(0,s.iD)("h5",L,"已選購商品")):(0,s.kq)("",!0),(0,s._)("div",W,[(0,s._)("table",G,[T,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cart.carts,(a=>((0,s.wg)(),(0,s.iD)("tr",{class:"table-nowrap",key:a.id},[(0,s._)("td",null,(0,l.zw)(a.product.title),1),(0,s._)("td",null,[(0,s._)("div",M,[(0,s.wy)((0,s._)("input",{type:"number",class:"form-control fs-7",min:"1",disabled:a.id===t.cartLoadingItem,onChange:e=>t.updateCart(a),"onUpdate:modelValue":t=>a.qty=t,onInput:t=>a.qty=Number(t.target.value.replace(/^(0+)|[^\d]+/g,""))||1},null,40,D),[[d.nr,a.qty,void 0,{number:!0}]])])]),(0,s._)("td",$,[O,(0,s.Uk)(" "+(0,l.zw)(t.$filters.currency(a.total)),1)]),(0,s._)("td",P,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",disabled:t.cartLoadingItem===a.id,onClick:e=>t.removeCartItem(a.id)},R,8,j)])])))),128))])])]),0==t.cartNum?((0,s.wg)(),(0,s.iD)("h5",Y,"產品尚未加入購物車!")):(0,s.kq)("",!0),(0,s._)("div",V,[t.cartNum>0?((0,s.wg)(),(0,s.j4)(c,{key:0,to:"/cart",class:"btn btn-dark btn-hover rounded-0",onClick:t.cartBoxToggle},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{icon:"fa-solid fa-cash-register"}),z])),_:1},8,["onClick"])):((0,s.wg)(),(0,s.j4)(c,{key:1,to:"/products",class:"btn btn-dark btn-hover rounded-0",onClick:t.cartBoxToggle},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{icon:"fa-solid fa-basket-shopping"}),E])),_:1},8,["onClick"]))])],2),(0,s._)("li",H,[(0,s.Wm)(c,{to:"/Favorite",class:(0,l.C_)(["nav-link px-3",{"text-warning":"favorite"===t.$route.name}])},{default:(0,s.w5)((()=>[Q,0!=t.favoriteNum?((0,s.wg)(),(0,s.iD)("div",J,(0,l.zw)(t.favoriteNum),1)):(0,s.kq)("",!0)])),_:1},8,["class"])])])])])])}e(434);var X=e(4301),tt=e(4677),at=e(6294),et=e(9498),st=e(8778),ot={computed:{...(0,X.rn)(tt.Z,["cart","cartNum","cartBoxState","updateCart"]),...(0,X.rn)(et.Z,["favoriteNum"]),...(0,X.rn)(at.Z,["cartLoadingItem"])},methods:{...(0,X.nv)(tt.Z,["getCart","removeCartItem","cartBoxToggle"]),...(0,X.nv)(st.Z,["goCart","goProducts"])}},rt=e(89);const it=(0,rt.Z)(ot,[["render",K],["__scopeId","data-v-f3c4c71c"]]);var ct=it;const nt={key:0,class:"bg-danger text-white rounded-circle text-center position-absolute num"};function lt(t,a,e,o,r,i){const c=(0,s.up)("FontAwesomeIcon"),n=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["rounded-circle bg-white border border-3 border-warning d-flex justify-content-center align-items-center",{"float-cart-up":t.goTopIcon,"float-cart-down":!t.goTopIcon}])},[(0,s.Wm)(n,{to:"/cart"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{icon:"fa-solid fa-cart-shopping",class:"text-dark fs-1"}),0!==t.cartNum?((0,s.wg)(),(0,s.iD)("div",nt,(0,l.zw)(t.cartNum),1)):(0,s.kq)("",!0)])),_:1})],2)}var dt=e(6197),ut={computed:{...(0,X.rn)(tt.Z,["cartNum"]),...(0,X.rn)(dt.Z,["goTopIcon"])},methods:{...(0,X.nv)(st.Z,["goCart"])}};const pt=(0,rt.Z)(ut,[["render",lt],["__scopeId","data-v-481ccafe"]]);var gt=pt,ht=e(4238),vt=e(2175),ft={components:{ToastMessages:n.Z,UserNavbar:ct,FloatCart:gt,UserFooter:c.Z,GoTop:vt.Z},computed:{...(0,X.rn)(at.Z,["isLoading"]),hasFloatCart(){const t=["cart","checkout","checkoutPay","adminLogin"];return!t.includes(this.$route.name)}},methods:{...(0,X.nv)(ht.Z,["getProducts"]),...(0,X.nv)(tt.Z,["getCart"])},created(){this.getProducts(),this.getCart()}};const mt=(0,rt.Z)(ft,[["render",i],["__scopeId","data-v-19e489d8"]]);var bt=mt}}]);
//# sourceMappingURL=383.b9ae784b.js.map