"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[163],{4677:function(t,e,a){var s=a(6265),l=a.n(s),o=a(4301),r=a(6294);const c=(0,r.Z)();e["Z"]=(0,o.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1}),actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";c.isLoading=!0,l().get(t).then((t=>{console.log("GETC!!!!!!!!!!!!!!!!"),this.cartNum=t.data.data.carts.length,console.log("this.cartNum",this.cartNum),this.cart=t.data.data,c.isLoading=!1})).catch((t=>console.error(t)))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t.id}`;c.isLoading=!0,c.cartLoadingItem=t.id;const a={product_id:t.product_id,qty:t.qty};l().put(e,{data:a}).then((t=>{c.cartLoadingItem="",this.getCart()})).catch((t=>console.error(t)))},removeCartItem(t){c.cartLoadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${t}`;c.isLoading=!0,l()["delete"](e).then((t=>{console.log(t),c.PushManager(t,"移除購物車品項"),c.cartLoadingItem="",this.getCart(),c.isLoading=!1})).catch((t=>console.error(t)))},addCart(t,e=1){const a="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";c.cartLoadingItem=t;const s={product_id:t,qty:e};l().post(a,{data:s}).then((t=>{c.cartLoadingItem="",this.getCart(),c.PushManager(t,"加入購物車")})).catch((t=>console.error(t)))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState}}})},8778:function(t,e,a){var s=a(1120),l=a(4301),o=a(4677);const r=(0,o.Z)();e["Z"]=(0,l.Q_)("goStore",{actions:{goCart(){s.Z.push("/cart"),r.cartBoxState=!1},goProducts(){s.Z.push("/products"),r.cartBoxState=!1},goProduct(t){s.Z.push(`/product/${t}`)},goCheckout(){s.Z.push("/checkout")}}})},6294:function(t,e,a){var s=a(4301);e["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{PushManager(t,e="更新"){if(t.data.success){const t={style:"success",title:`${e}成功`};this.messages.push(t)}else{const a="string"===typeof t.data.message?[t.data.message]:t.data.message,s={style:"danger",title:`${e}失敗`,content:a.join("、")};this.messages.push(s)}}}})},7163:function(t,e,a){a.r(e),a.d(e,{default:function(){return Q}});var s=a(3396),l=a(7139),o=a(9242);const r=(0,s.uE)('<div class="container"><div class="row test"><div class="col test justify-content-center"> 1.輸入訂單資料 </div><div class="col test"> 2.付款 </div><div class="col test"> 3.退貨 </div></div></div>',1),c={class:"container"},i={class:"my-5 row justify-content-center"},n=(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 fw-bold"},"收件人資訊")],-1),d={class:"mb-3"},u=(0,s._)("label",{for:"email",class:"form-label fw-bold fs-5"},"Email：",-1),m={class:"mb-3"},f=(0,s._)("label",{for:"name",class:"form-label fw-bold fs-5"},"收件人姓名：",-1),h={class:"mb-3"},g=(0,s._)("label",{for:"tel",class:"form-label fw-bold fs-5"},"收件人電話：",-1),p={class:"mb-3"},v=(0,s._)("label",{for:"address",class:"form-label fw-bold fs-5"},"收件人地址：",-1),b={class:"mb-3"},_=(0,s._)("label",{for:"message",class:"form-label fw-bold fs-5"},"留言：",-1),y={class:"d-flex justify-content-between mt-3"},w=(0,s._)("i",{class:"bi bi-caret-left-fill"},null,-1),x=(0,s.Uk)("回購物車 "),C=[w,x],k=(0,s._)("button",{type:"submit",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg"},[(0,s.Uk)(" 付款去"),(0,s._)("i",{class:"bi bi-caret-right-fill"})],-1),L={class:"col-md-6 mt-5 mt-md-0"},Z=(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 text-center fw-bold"},"購物清單")],-1),V={class:"table-responsive-md mt-4"},$={class:"table lh-lg"},S=(0,s._)("thead",{class:"table-primary"},[(0,s._)("tr",{class:"table-nowrap"},[(0,s._)("th",{class:"text-start"},"商品名稱"),(0,s._)("th",null,"數量"),(0,s._)("th",{class:"text-end"},"價格")])],-1),W={class:"text-center"},I={class:"text-end"},P={class:"text-strong"},q={class:"text-center table-primary"},N={colspan:"3",class:"text-end fs-4"};function U(t,e,a,w,x,U){const j=(0,s.up)("Loading"),B=(0,s.up)("v-field"),E=(0,s.up)("ErrorMessage"),M=(0,s.up)("v-form");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(j,{active:t.isLoading},null,8,["active"]),r,(0,s._)("div",c,[(0,s._)("div",i,[(0,s.Wm)(M,{class:"col-md-6",onSubmit:U.gotoPay},{default:(0,s.w5)((({errors:a})=>[n,(0,s._)("div",d,[u,(0,s.Wm)(B,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:x.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=t=>x.form.user.email=t)},null,8,["class","modelValue"]),(0,s.Wm)(E,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",m,[f,(0,s.Wm)(B,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:x.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=t=>x.form.user.name=t)},null,8,["class","modelValue"]),(0,s.Wm)(E,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",h,[g,(0,s.Wm)(B,{id:"tel",name:"電話",type:"tel",class:(0,l.C_)(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:x.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=t=>x.form.user.tel=t)},null,8,["class","modelValue"]),(0,s.Wm)(E,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",p,[v,(0,s.Wm)(B,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:x.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=t=>x.form.user.address=t)},null,8,["class","modelValue"]),(0,s.Wm)(E,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",b,[_,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[4]||(e[4]=t=>x.form.message=t)},null,512),[[o.nr,x.form.message]])]),(0,s._)("div",y,[(0,s._)("button",{type:"button",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg",onClick:e[5]||(e[5]=(0,o.iM)(((...e)=>t.goCart&&t.goCart(...e)),["prevent"]))},C),k])])),_:1},8,["onSubmit"]),(0,s._)("div",L,[Z,(0,s._)("div",V,[(0,s._)("table",$,[S,(0,s._)("tbody",W,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.cart.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{class:"table-nowrap text-start",key:e.id},[(0,s._)("td",null,(0,l.zw)(e.product.title),1),(0,s._)("td",null,(0,l.zw)(e.qty),1),(0,s._)("td",I,[(0,s._)("div",P," NT$ "+(0,l.zw)(t.$filters.currency(e.final_total))+" 元 ",1)])])))),128))]),(0,s._)("tfoot",q,[(0,s._)("tr",null,[(0,s._)("td",N," 總計 :NT$ "+(0,l.zw)(t.$filters.currency(t.cart.final_total))+" 元 ",1)])])])])])])])],64)}var j=a(4301),B=a(6294),E=a(4677),M=a(8778),z={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...(0,j.rn)(B.Z,["isLoading"]),...(0,j.rn)(E.Z,["cart","cartNum"])},methods:{...(0,j.nv)(E.Z,["getCart"]),...(0,j.nv)(M.Z,["goCart","gotoPay"]),...(0,j.nv)(E.Z,["getCart"]),gotoPay(){const t="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{this.$router.push(`/checkoutPay/${t.data.orderId}`),this.getCart()})).catch((t=>console.error(t)))}}},T=a(89);const D=(0,T.Z)(z,[["render",U]]);var Q=D}}]);
//# sourceMappingURL=163.42a37e32.js.map