"use strict";(self["webpackChunkhw1"]=self["webpackChunkhw1"]||[]).push([[301],{4677:function(e,t,a){var s=a(6265),l=a.n(s),o=a(1120),r=a(4301),n=a(6294);const c=(0,n.Z)();t["Z"]=(0,r.Q_)("cartStore",{state:()=>({cart:{},cartNum:0,cartBoxState:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{getCart(){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";c.isLoading=!0,l().get(e).then((e=>{this.cartNum=e.data.data.carts.length,this.cart=e.data.data,c.isLoading=!1})).catch((()=>{c.isLoading=!1,c.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},updateCart(e){const t=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${e.id}`;c.isLoading=!0,c.cartLoadingItem=e.id;const a={product_id:e.product_id,qty:e.qty};l().put(t,{data:a}).then((()=>{c.cartLoadingItem="",this.getCart()})).catch((()=>{c.isLoading=!1,c.pushManager(!1,"更新","發生錯誤，請重新操作")}))},removeCartItem(e){c.cartLoadingItem=e;const t=`https://vue3-course-api.hexschool.io/api/kelvinlin9/cart/${e}`;c.isLoading=!0,l()["delete"](t).then((e=>{c.pushManager(e,"刪除","此項目已移除購物車"),c.cartLoadingItem="",this.getCart(),c.isLoading=!1})).catch((()=>{c.isLoading=!1,c.pushManager(!1,"刪除","發生錯誤，請重新操作")}))},addCart(e,t=1){const a="https://vue3-course-api.hexschool.io/api/kelvinlin9/cart";c.cartLoadingItem=e;const s={product_id:e,qty:t};l().post(a,{data:s}).then((e=>{c.cartLoadingItem="",this.getCart(),c.pushManager(e,"更新","已加入購物車")})).catch((()=>{c.isLoading=!1,c.pushManager(!1,"更新","發生錯誤，請重新整理頁面")}))},cartBoxToggle(){this.cartBoxState=!this.cartBoxState},gotoPay(){const e="https://vue3-course-api.hexschool.io/api/kelvinlin9/order",t=this.form;l().post(e,{data:t}).then((e=>{o.Z.push(`/checkoutPay/${e.data.orderId}`),this.form={user:{name:"",email:"",tel:"",address:""},message:""},this.getCart()})).catch((()=>{c.isLoading=!1,c.pushManager(!1,"傳送","發生錯誤，請重新填寫資料並送出")}))}}})},8778:function(e,t,a){var s=a(1120),l=a(4301),o=a(4677);const r=(0,o.Z)();t["Z"]=(0,l.Q_)("goStore",{actions:{goCart(){s.Z.push("/cart"),r.cartBoxState=!1},goProducts(){s.Z.push("/products"),r.cartBoxState=!1},goProduct(e){s.Z.push(`/product/${e}`)},goCheckout(){s.Z.push("/checkout")}}})},6294:function(e,t,a){var s=a(4301);t["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:[],cartLoadingItem:"",messages:[]}),actions:{pushManager(e=!0,t="更新",a=""){if(e){const e={style:"success",title:`${t}成功`,content:`${a}`};this.messages.push(e)}else{const e={style:"danger",title:`${t}失敗`,content:`${a}`};this.messages.push(e)}}}})},9049:function(e,t,a){a.d(t,{Z:function(){return y}});var s=a(3396),l=a(7139);const o={class:"container py-4 checkout-bar w-75 no-print"},r={class:"row fs-5 fw-bold justify-content-center"},n=(0,s.Uk)(" 購物"),c=(0,s._)("br",{class:"d-block d-sm-none"},null,-1),i=(0,s.Uk)("車 "),d=(0,s.Uk)(" 填寫"),u=(0,s._)("br",{class:"d-block d-sm-none"},null,-1),m=(0,s.Uk)("訂單 "),f=(0,s.Uk)(" 確認"),p=(0,s._)("br",{class:"d-block d-sm-none"},null,-1),h=(0,s.Uk)("付款 ");function g(e,t){const a=(0,s.up)("FontAwesomeIcon");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[(0,s._)("div",{class:(0,l.C_)(["col-3 col-lg-2 d-flex flex-column px-2 py-3 align-items-center rounded-pill",{"bg-primary":"cart"===e.$route.name}])},[(0,s.Wm)(a,{icon:"fa-solid fa-1"}),n,c,i],2),(0,s._)("div",{class:(0,l.C_)(["col-3 col-lg-2 d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkout"===e.$route.name}])},[(0,s.Wm)(a,{icon:"fa-solid fa-2"}),d,u,m],2),(0,s._)("div",{class:(0,l.C_)(["col-3 col-lg-2 d-flex flex-column mx-2 py-3 align-items-center rounded-pill",{"bg-primary":"checkoutPay"===e.$route.name}])},[(0,s.Wm)(a,{icon:"fa-solid fa-3"}),f,p,h],2)])])}var b=a(89);const _={},v=(0,b.Z)(_,[["render",g]]);var y=v},6301:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var s=a(3396),l=a(7139),o=a(9242);const r={class:"container"},n={class:"py-3 row justify-content-center flex-sm-row-reverse"},c={class:"col-md-6"},i=(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 text-center fw-bold"},"購物清單")],-1),d={class:"table-responsive-md my-4"},u={class:"table lh-lg"},m=(0,s._)("thead",{class:"table-primary"},[(0,s._)("tr",{class:"table-nowrap"},[(0,s._)("th",{class:"text-start"},"商品名稱"),(0,s._)("th",null,"數量"),(0,s._)("th",{class:"text-end"},"價格")])],-1),f={class:"text-center"},p={class:"text-end"},h={class:"text-strong"},g=(0,s._)("small",{class:"fs-7"}," NT$ ",-1),b={class:"table-primary"},_={colspan:"3",class:"text-end fs-4"},v=(0,s.Uk)(" 總計 : "),y=(0,s._)("small",{class:"fs-6"}," NT$ ",-1),k=(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("h1",{class:"fs-2 fw-bold"},"收件人資訊")],-1),x={class:"mb-3"},w=(0,s._)("label",{for:"email",class:"form-label fw-bold fs-5"}," Email： ",-1),C={class:"mb-3"},Z=(0,s._)("label",{for:"name",class:"form-label fw-bold fs-5"}," 收件人姓名： ",-1),L={class:"mb-3"},U=(0,s._)("label",{for:"tel",class:"form-label fw-bold fs-5"}," 收件人電話： ",-1),V={class:"mb-3"},$=(0,s._)("label",{for:"address",class:"form-label fw-bold fs-5"}," 收件人地址： ",-1),W={class:"mb-3"},I=(0,s._)("label",{for:"message",class:"form-label fw-bold fs-5"}," 留言： ",-1),S={class:"d-flex justify-content-between mt-3"},M=(0,s._)("i",{class:"bi bi-caret-left-fill"},null,-1),q=(0,s.Uk)("回購物車 "),B=[M,q],P=(0,s._)("button",{type:"submit",class:"btn btn-primary btn-hover rounded-0 fw-bold btn-lg"},[(0,s.Uk)(" 付款去"),(0,s._)("i",{class:"bi bi-caret-right-fill"})],-1);function j(e,t,a,M,q,j){const N=(0,s.up)("UserCheckoutBar"),z=(0,s.up)("VField"),D=(0,s.up)("ErrorMessage"),E=(0,s.up)("VForm");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(N),(0,s._)("div",r,[(0,s._)("div",n,[(0,s._)("div",c,[i,(0,s._)("div",d,[(0,s._)("table",u,[m,(0,s._)("tbody",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cart.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{class:"table-nowrap text-start",key:t.id},[(0,s._)("td",null,(0,l.zw)(t.product.title),1),(0,s._)("td",null,(0,l.zw)(t.qty),1),(0,s._)("td",p,[(0,s._)("div",h,[g,(0,s.Uk)(" "+(0,l.zw)(e.$filters.currency(t.final_total))+" 元 ",1)])])])))),128))]),(0,s._)("tfoot",b,[(0,s._)("tr",null,[(0,s._)("td",_,[v,y,(0,s.Uk)(" "+(0,l.zw)(e.$filters.currency(e.cart.final_total))+" 元 ",1)])])])])])]),(0,s.Wm)(E,{class:"col-md-6",onSubmit:e.gotoPay},{default:(0,s.w5)((({errors:a})=>[k,(0,s._)("div",x,[w,(0,s.Wm)(z,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:e.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.user.email=t)},null,8,["class","modelValue"]),(0,s.Wm)(D,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",C,[Z,(0,s.Wm)(z,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:e.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.user.name=t)},null,8,["class","modelValue"]),(0,s.Wm)(D,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",L,[U,(0,s.Wm)(z,{id:"tel",name:"電話",type:"tel",class:(0,l.C_)(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"numeric|min:7|max:10|required",modelValue:e.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.user.tel=t)},null,8,["class","modelValue"]),(0,s.Wm)(D,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",V,[$,(0,s.Wm)(z,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:e.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.user.address=t)},null,8,["class","modelValue"]),(0,s.Wm)(D,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",W,[I,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.message=t)},null,512),[[o.nr,e.form.message]])]),(0,s._)("div",S,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-hover rounded-0 fw-bold btn-lg text-dark",onClick:t[5]||(t[5]=(...t)=>e.goCart&&e.goCart(...t))},B),P])])),_:1},8,["onSubmit"])])])],64)}var N=a(9049),z=a(4301),D=a(4677),E=a(8778),F={components:{UserCheckoutBar:N.Z},computed:{...(0,z.rn)(D.Z,["cart","cartNum","gotoPay"]),...(0,z.Ah)(D.Z,["form"])},methods:{...(0,z.nv)(D.Z,["getCart"]),...(0,z.nv)(E.Z,["goCart"]),...(0,z.nv)(D.Z,["getCart"])}},Q=a(89);const T=(0,Q.Z)(F,[["render",j]]);var A=T}}]);
//# sourceMappingURL=301.68611838.js.map